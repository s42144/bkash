(cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF'
diff --git a/admin.html b/admin.html
--- a/admin.html
+++ b/admin.html
@@ -1,1633 +1,1696 @@
-<!DOCTYPE html>
-<html lang="en">
-<head>
-  <meta charset="UTF-8" />
-  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" />
-  <title>Exotix Trade Admin Panel</title>
-  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/825/825454.png" />
-  <link rel="preconnect" href="https://fonts.googleapis.com">
-  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
-  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
-
-  <!-- Chart.js -->
-  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
-
-  <style>
-    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
-    :root{
-      --primary-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
-      --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-      --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
-      --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
-      --danger-gradient: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
-      --dark-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
-      --card-bg: rgba(255,255,255,0.05);
-      --card-border: rgba(255,255,255,0.1);
-      --text-primary: #ffffff; 
-      --text-secondary: #a0a0a0;
-      --accent-blue: #3b82f6;
-      --accent-green: #10b981;
-      --accent-yellow: #f59e0b;
-      --accent-red: #ef4444;
-      --shadow-md: 0 4px 16px rgba(0,0,0,0.3); 
-      --shadow-lg: 0 8px 32px rgba(0,0,0,0.4);
-    }
-    html,body{width:100%;height:100%;font-family:'Inter',system-ui,Segoe UI,sans-serif;background:var(--dark-bg);color:var(--text-primary);overflow-x:hidden}
-    #app{display:block;min-height:100vh;padding-bottom:80px;background:var(--dark-bg);background-attachment:fixed}
-    #main-content{width:100%;max-width:1200px;margin:0 auto;padding:0 16px}
-
-    /* Header */
-    .admin-header{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:16px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:20px;text-align:center}
-    .admin-title{font-size:28px;font-weight:800;background:var(--success-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
-    .admin-subtitle{font-size:14px;color:var(--text-secondary);margin-top:8px}
-
-    /* Stats Grid */
-    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}
-    .stat-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:20px;text-align:center}
-    .stat-icon{width:48px;height:48px;border-radius:12px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center;margin:0 auto 12px}
-    .stat-icon img{width:24px;height:24px}
-    .stat-label{font-size:12px;color:var(--text-secondary);font-weight:700;text-transform:uppercase;margin-bottom:8px}
-    .stat-value{font-size:24px;font-weight:800;color:var(--accent-green)}
-
-    /* Cards */
-    .card{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:20px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:20px}
-    .card-title{font-size:18px;font-weight:800;margin-bottom:16px;color:var(--accent-blue)}
-
-    /* Buttons */
-    .btn-primary,.btn-success,.btn-danger,.btn-warning{padding:10px 16px;border:none;border-radius:8px;font-size:14px;font-weight:700;color:#fff;cursor:pointer;transition:.2s;margin:4px}
-    .btn-primary{background:var(--primary-gradient)}
-    .btn-success{background:var(--success-gradient)}
-    .btn-danger{background:var(--danger-gradient)}
-    .btn-warning{background:var(--warning-gradient)}
-
-    /* Forms */
-    .form-group{margin-bottom:16px}
-    .form-label{font-size:12px;color:var(--text-secondary);font-weight:700;margin-bottom:6px;display:block}
-    .form-input{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
-    .form-select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
-
-    /* Tables */
-    .table{width:100%;border-collapse:collapse;margin-top:16px}
-    .table th,.table td{padding:12px;text-align:left;border-bottom:1px solid var(--card-border)}
-    .table th{background:rgba(255,255,255,.05);font-weight:700;font-size:12px;text-transform:uppercase;color:var(--text-secondary)}
-    .table td{font-size:14px}
-
-    /* Status badges */
-    .status-badge{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase}
-    .status-pending{background:rgba(245,158,11,.2);color:#f59e0b}
-    .status-approved{background:rgba(16,185,129,.2);color:#10b981}
-    .status-rejected{background:rgba(239,68,68,.2);color:#ef4444}
-
-    /* Search */
-    .search-box{width:100%;padding:12px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none;margin-bottom:16px}
-
-    /* Grid Layout */
-    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
-    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
-
-    /* Notification */
-    .notification{position:fixed;top:16px;right:16px;background:var(--success-gradient);color:#fff;padding:12px 20px;border-radius:12px;font-size:13px;font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:10000}
-
-    /* Nav */
-    .nav-bar{position:fixed;bottom:0;left:0;width:100%;background:rgba(12,12,12,.95);backdrop-filter:blur(20px);border-top:1px solid var(--card-border);display:flex;justify-content:space-around;padding:10px 0 8px;z-index:1000;box-shadow:0 -4px 16px rgba(0,0,0,.2)}
-    .nav-btn{flex:1;background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;transition:.2s;padding:8px;border-radius:12px}
-    .nav-icon{width:30px;height:30px;border-radius:10px;filter:grayscale(100%) brightness(.7)}
-    .nav-label{font-size:11px;font-weight:700;color:var(--text-secondary)}
-    .nav-btn.active .nav-icon{filter:grayscale(0%) brightness(1);box-shadow:0 4px 12px rgba(59,130,246,.4)}
-    .nav-btn.active .nav-label{color:var(--accent-blue)}
-
-    @media(max-width:768px){
-      .grid-2,.grid-3{grid-template-columns:1fr}
-      .stats-grid{grid-template-columns:repeat(2,1fr)}
-    }
-  </style>
-</head>
-<body>
-  <!-- App -->
-  <div id="app">
-    <div class="admin-header">
-      <div class="admin-title">Exotix Trade Admin Panel</div>
-      <div class="admin-subtitle">Professional Trading Platform Management</div>
-    </div>
-    <div id="main-content"></div>
-
-    <!-- Navigation Bar -->
-    <div class="nav-bar">
-      <button class="nav-btn active" data-tab="dashboard">
-        <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Dashboard" class="nav-icon" />
-        <span class="nav-label">Dashboard</span>
-      </button>
-      <button class="nav-btn" data-tab="users">
-        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Users" class="nav-icon" />
-        <span class="nav-label">Users</span>
-      </button>
-      <button class="nav-btn" data-tab="deposits">
-        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Deposits" class="nav-icon" />
-        <span class="nav-label">Deposits</span>
-      </button>
-      <button class="nav-btn" data-tab="withdrawals">
-        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Withdrawals" class="nav-icon" />
-        <span class="nav-label">Withdrawals</span>
-      </button>
-      <button class="nav-btn" data-tab="tasks">
-        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Tasks" class="nav-icon" />
-        <span class="nav-label">Tasks</span>
-      </button>
-      <button class="nav-btn" data-tab="settings">
-        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Settings" class="nav-icon" />
-        <span class="nav-label">Settings</span>
-      </button>
-    </div>
-  </div>
-
-  <script type="module">
-    // Firebase v9 Modular
-    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
-    import {
-      getDatabase, ref, get, set, update, onValue, off, push, query, orderByChild, equalTo, runTransaction, remove
-    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
-
-    // Config
-    const firebaseConfig = {
-      apiKey: "AIzaSyBfR97veh6idxb81mH6N5_Gq8-CpW2D7bE",
-      authDomain: "jbhigfi.firebaseapp.com",
-      databaseURL: "https://jbhigfi-default-rtdb.firebaseio.com",
-      projectId: "jbhigfi",
-      storageBucket: "jbhigfi.firebasestorage.app",
-      messagingSenderId: "736760492095",
-      appId: "1:736760492095:web:47b94412495e21c561c88a",
-      measurementId: "G-ZZMHC9RTVT"
-    };
-
-    const app = initializeApp(firebaseConfig);
-    const rtdb = getDatabase(app);
-
-    // Bot
-    const BOT_TOKEN = '8332448822:AAHKhDvougBhBThL6aBl3hGjZbKFGAq7BUs';
-    const sendBot = async (msg, userId) => {
-      try {
-        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
-          method: 'POST', headers: { 'Content-Type': 'application/json' },
-          body: JSON.stringify({ chat_id: userId, text: msg, parse_mode: 'HTML' })
-        });
-      } catch (e) { console.warn('Bot send failed', e); }
-    };
-
-    // State
-    let adminData = {
-      totalUsers: 0,
-      totalDeposits: 0,
-      totalWithdrawals: 0,
-      activeUsers: 0,
-      totalAds: 0,
-      totalTasks: 0
-    };
-
-    // Utils
-    const notify = (m, d=3000) => { 
-      const n=document.createElement('div'); 
-      n.className='notification'; 
-      n.textContent=m; 
-      document.body.appendChild(n); 
-      setTimeout(()=>n.remove(), d); 
-    };
-
-    // Tabs
-    function showTab(tab){
-      document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
-      if(tab==='dashboard') renderDashboard();
-      if(tab==='users') renderUsers();
-      if(tab==='deposits') renderDeposits();
-      if(tab==='withdrawals') renderWithdrawals();
-      if(tab==='tasks') renderTasks();
-      if(tab==='settings') renderSettings();
-    }
-
-    // Dashboard
-    function renderDashboard(){
-      const html = `
-        <div class="stats-grid">
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Users" />
-            </div>
-            <div class="stat-label">Total Users</div>
-            <div class="stat-value" id="totalUsers">${adminData.totalUsers}</div>
-          </div>
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Deposits" />
-            </div>
-            <div class="stat-label">Total Deposits</div>
-            <div class="stat-value" id="totalDeposits">$${adminData.totalDeposits.toFixed(2)}</div>
-          </div>
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Withdrawals" />
-            </div>
-            <div class="stat-label">Total Withdrawals</div>
-            <div class="stat-value" id="totalWithdrawals">$${adminData.totalWithdrawals.toFixed(2)}</div>
-          </div>
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Active Users" />
-            </div>
-            <div class="stat-label">Active Users</div>
-            <div class="stat-value" id="activeUsers">${adminData.activeUsers}</div>
-          </div>
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Ads" />
-            </div>
-            <div class="stat-label">Total Ads</div>
-            <div class="stat-value" id="totalAds">${adminData.totalAds}</div>
-          </div>
-          <div class="stat-card">
-            <div class="stat-icon">
-              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Tasks" />
-            </div>
-            <div class="stat-label">Total Tasks</div>
-            <div class="stat-value" id="totalTasks">${adminData.totalTasks}</div>
-          </div>
-        </div>
-
-        <div class="grid-2">
-          <div class="card">
-            <div class="card-title">Recent Deposits</div>
-            <div id="recentDeposits">Loading...</div>
-          </div>
-          <div class="card">
-            <div class="card-title">Recent Withdrawals</div>
-            <div id="recentWithdrawals">Loading...</div>
-          </div>
-        </div>
-
-        <div class="card">
-          <div class="card-title">User Activity Chart</div>
-          <canvas id="activityChart" height="300"></canvas>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-      loadDashboardData();
-    }
-
-    function loadDashboardData(){
-      // Load users
-      get(ref(rtdb,'users')).then(s=>{
-        if(s.exists()){
-          const users = s.val();
-          adminData.totalUsers = Object.keys(users).length;
-          adminData.activeUsers = Object.values(users).filter(u => (Date.now()/1000 - u.createdAt) < 86400).length;
-          document.getElementById('totalUsers').textContent = adminData.totalUsers;
-          document.getElementById('activeUsers').textContent = adminData.activeUsers;
-        }
-      });
-
-      // Load deposits
-      get(ref(rtdb,'admin/deposits')).then(s=>{
-        if(s.exists()){
-          const deposits = s.val();
-          adminData.totalDeposits = Object.values(deposits).reduce((sum, d) => sum + (d.amount || 0), 0);
-          document.getElementById('totalDeposits').textContent = `$${adminData.totalDeposits.toFixed(2)}`;
-          
-          const recent = Object.values(deposits).slice(-5).reverse();
-          document.getElementById('recentDeposits').innerHTML = recent.map(d => `
-            <div style="display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid var(--card-border)">
-              <div>
-                <div style="font-weight:700">${d.userName}</div>
-                <div style="font-size:12px;color:var(--text-secondary)">$${d.amount}</div>
-              </div>
-              <div>
-                <span class="status-badge status-${d.status}">${d.status}</span>
-                <div style="font-size:11px;color:var(--text-secondary)">${new Date(d.timestamp*1000).toLocaleDateString()}</div>
-              </div>
-            </div>
-          `).join('');
-        }
-      });
-
-      // Load withdrawals
-      get(ref(rtdb,'admin/withdrawals')).then(s=>{
-        if(s.exists()){
-          const withdrawals = s.val();
-          adminData.totalWithdrawals = Object.values(withdrawals).reduce((sum, w) => sum + (w.amount || 0), 0);
-          document.getElementById('totalWithdrawals').textContent = `$${adminData.totalWithdrawals.toFixed(2)}`;
-          
-          const recent = Object.values(withdrawals).slice(-5).reverse();
-          document.getElementById('recentWithdrawals').innerHTML = recent.map(w => `
-            <div style="display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid var(--card-border)">
-              <div>
-                <div style="font-weight:700">${w.userName}</div>
-                <div style="font-size:12px;color:var(--text-secondary)">$${w.amount}</div>
-              </div>
-              <div>
-                <span class="status-badge status-${w.status}">${w.status}</span>
-                <div style="font-size:11px;color:var(--text-secondary)">${new Date(w.timestamp*1000).toLocaleDateString()}</div>
-              </div>
-            </div>
-          `).join('');
-        }
-      });
-
-      // Load tasks
-      get(ref(rtdb,'tasks')).then(s=>{
-        if(s.exists()){
-          adminData.totalTasks = Object.keys(s.val()).length;
-          document.getElementById('totalTasks').textContent = adminData.totalTasks;
-        }
-      });
-
-      // Activity Chart
-      setTimeout(()=>{
-        const ctx = document.getElementById('activityChart').getContext('2d');
-        new Chart(ctx, {
-          type: 'line',
-          data: {
-            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
-            datasets: [{
-              label: 'Active Users',
-              data: [12, 19, 3, 5, 2, 3, 7],
-              borderColor: '#3b82f6',
-              backgroundColor: 'rgba(59, 130, 246, 0.1)',
-              tension: 0.4
-            }]
-          },
-          options: {
-            responsive: true,
-            plugins: {
-              legend: { display: false }
-            },
-            scales: {
-              x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: 'rgba(255,255,255,0.7)' } },
-              y: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: 'rgba(255,255,255,0.7)' } }
-            }
-          }
-        });
-      }, 100);
-    }
-
-    // Users
-    function renderUsers(){
-      const html = `
-        <div class="card">
-          <div class="card-title">User Management</div>
-          <input type="text" class="search-box" id="userSearch" placeholder="Search users by ID or name...">
-          <div id="usersList">Loading...</div>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-      loadUsers();
-
-      document.getElementById('userSearch').addEventListener('input', (e) => {
-        const query = e.target.value.toLowerCase();
-        filterUsers(query);
-      });
-    }
-
-    function loadUsers(){
-      get(ref(rtdb,'users')).then(s=>{
-        if(s.exists()){
-          const users = s.val();
-          let html = `
-            <table class="table">
-              <thead>
-                <tr>
-                  <th>Avatar</th>
-                  <th>Name</th>
-                  <th>ID</th>
-                  <th>Balance</th>
-                  <th>Referrals</th>
-                  <th>Created</th>
-                  <th>Actions</th>
-                </tr>
-              </thead>
-              <tbody>
-          `;
-          
-          Object.entries(users).forEach(([id, user]) => {
-            html += `
-              <tr>
-                <td><img src="${user.avatar}" style="width:32px;height:32px;border-radius:50%;object-fit:cover"></td>
-                <td>${user.name}</td>
-                <td>${id}</td>
-                <td>$${(user.usdtBalance || 0).toFixed(6)}</td>
-                <td>${user.referrals || 0}</td>
-                <td>${new Date(user.createdAt * 1000).toLocaleDateString()}</td>
-                <td>
-                  <button class="btn-primary" onclick="editUser('${id}')">Edit</button>
-                  <button class="btn-warning" onclick="banUser('${id}')">Ban</button>
-                </td>
-              </tr>
-            `;
-          });
-          
-          html += '</tbody></table>';
-          document.getElementById('usersList').innerHTML = html;
-        }
-      });
-    }
-
-    function filterUsers(query){
-      const rows = document.querySelectorAll('.table tbody tr');
-      rows.forEach(row => {
-        const text = row.textContent.toLowerCase();
-        row.style.display = text.includes(query) ? '' : 'none';
-      });
-    }
-
-    // Deposits
-    function renderDeposits(){
-      const html = `
-        <div class="card">
-          <div class="card-title">Deposit Management</div>
-          <div id="depositsList">Loading...</div>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-      loadDeposits();
-    }
-
-    function loadDeposits(){
-      get(ref(rtdb,'admin/deposits')).then(s=>{
-        if(s.exists()){
-          const deposits = s.val();
-          let html = `
-            <table class="table">
-              <thead>
-                <tr>
-                  <th>User</th>
-                  <th>Amount</th>
-                  <th>TX Hash</th>
-                  <th>Status</th>
-                  <th>Date</th>
-                  <th>Actions</th>
-                </tr>
-              </thead>
-              <tbody>
-          `;
-          
-          Object.entries(deposits).forEach(([id, deposit]) => {
-            html += `
-              <tr>
-                <td>
-                  <div style="font-weight:700">${deposit.userName}</div>
-                  <div style="font-size:11px;color:var(--text-secondary)">${deposit.userId}</div>
-                </td>
-                <td>$${deposit.amount.toFixed(2)}</td>
-                <td style="font-family:monospace;font-size:11px">${deposit.txHash}</td>
-                <td><span class="status-badge status-${deposit.status}">${deposit.status}</span></td>
-                <td>${new Date(deposit.timestamp * 1000).toLocaleString()}</td>
-                <td>
-                  ${deposit.status === 'pending' ? `
-                    <button class="btn-success" onclick="approveDeposit('${id}', '${deposit.userId}', ${deposit.amount})">Approve</button>
-                    <button class="btn-danger" onclick="rejectDeposit('${id}', '${deposit.userId}')">Reject</button>
-                  ` : ''}
-                </td>
-              </tr>
-            `;
-          });
-          
-          html += '</tbody></table>';
-          document.getElementById('depositsList').innerHTML = html;
-        }
-      });
-    }
-
-    // Withdrawals
-    function renderWithdrawals(){
-      const html = `
-        <div class="card">
-          <div class="card-title">Withdrawal Management</div>
-          <div id="withdrawalsList">Loading...</div>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-      loadWithdrawals();
-    }
-
-    function loadWithdrawals(){
-      get(ref(rtdb,'admin/withdrawals')).then(s=>{
-        if(s.exists()){
-          const withdrawals = s.val();
-          let html = `
-            <table class="table">
-              <thead>
-                <tr>
-                  <th>User</th>
-                  <th>Amount</th>
-                  <th>Address</th>
-                  <th>Status</th>
-                  <th>Date</th>
-                  <th>Actions</th>
-                </tr>
-              </thead>
-              <tbody>
-          `;
-          
-          Object.entries(withdrawals).forEach(([id, withdrawal]) => {
-            html += `
-              <tr>
-                <td>
-                  <div style="font-weight:700">${withdrawal.userName}</div>
-                  <div style="font-size:11px;color:var(--text-secondary)">${withdrawal.userId}</div>
-                </td>
-                <td>$${withdrawal.amount.toFixed(2)}</td>
-                <td style="font-family:monospace;font-size:11px">${withdrawal.address}</td>
-                <td><span class="status-badge status-${withdrawal.status}">${withdrawal.status}</span></td>
-                <td>${new Date(withdrawal.timestamp * 1000).toLocaleString()}</td>
-                <td>
-                  ${withdrawal.status === 'pending' ? `
-                    <button class="btn-success" onclick="approveWithdrawal('${id}', '${withdrawal.userId}', ${withdrawal.amount})">Approve</button>
-                    <button class="btn-danger" onclick="rejectWithdrawal('${id}', '${withdrawal.userId}', ${withdrawal.amount})">Reject</button>
-                  ` : ''}
-                </td>
-              </tr>
-            `;
-          });
-          
-          html += '</tbody></table>';
-          document.getElementById('withdrawalsList').innerHTML = html;
-        }
-      });
-    }
-
-    // Tasks
-    function renderTasks(){
-      const html = `
-        <div class="grid-2">
-          <div class="card">
-            <div class="card-title">Add New Task</div>
-            <div class="form-group">
-              <label class="form-label">Task Name</label>
-              <input type="text" class="form-input" id="taskName" placeholder="Enter task name">
-            </div>
-            <div class="form-group">
-              <label class="form-label">Category</label>
-              <select class="form-select" id="taskCategory">
-                <option value="Project">Project</option>
-                <option value="Partner">Partner</option>
-                <option value="Advertise">Advertise</option>
-              </select>
-            </div>
-            <div class="form-group">
-              <label class="form-label">Reward Amount (USDT)</label>
-              <input type="number" step="0.01" class="form-input" id="taskAmount" placeholder="Enter reward amount">
-            </div>
-            <div class="form-group">
-              <label class="form-label">Task Link</label>
-              <input type="url" class="form-input" id="taskLink" placeholder="Enter task URL">
-            </div>
-            <div class="form-group">
-              <label class="form-label">Task Photo URL</label>
-              <input type="url" class="form-input" id="taskPhoto" placeholder="Enter photo URL">
-            </div>
-            <button class="btn-primary" onclick="addTask()">Add Task</button>
-          </div>
-          <div class="card">
-            <div class="card-title">Existing Tasks</div>
-            <div id="tasksList">Loading...</div>
-          </div>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-      loadTasks();
-    }
-
-    function loadTasks(){
-      get(ref(rtdb,'tasks')).then(s=>{
-        if(s.exists()){
-          const tasks = s.val();
-          let html = '';
-          
-          Object.entries(tasks).forEach(([id, task]) => {
-            html += `
-              <div style="border:1px solid var(--card-border);border-radius:8px;padding:12px;margin-bottom:8px">
-                <div style="display:flex;justify-content:space-between;align-items:center">
-                  <div>
-                    <div style="font-weight:700">${task.name}</div>
-                    <div style="font-size:12px;color:var(--text-secondary)">${task.category} ‚Ä¢ $${task.amount} USDT</div>
-                  </div>
-                  <div>
-                    <button class="btn-danger" onclick="deleteTask('${id}')">Delete</button>
-                  </div>
-                </div>
-              </div>
-            `;
-          });
-          
-          document.getElementById('tasksList').innerHTML = html || '<div style="text-align:center;color:var(--text-secondary)">No tasks found</div>';
-        }
-      });
-    }
-
-    // Settings
-    function renderSettings(){
-      const html = `
-        <div class="grid-2">
-          <div class="card">
-            <div class="card-title">Generate Redeem Code</div>
-            <div class="form-group">
-              <label class="form-label">Max Users</label>
-              <input type="number" class="form-input" id="redeemMaxUsers" placeholder="How many users can claim">
-            </div>
-            <div class="form-group">
-              <label class="form-label">Total USDT Pool</label>
-              <input type="number" step="0.01" class="form-input" id="redeemPool" placeholder="Total USDT to distribute">
-            </div>
-            <button class="btn-primary" onclick="generateRedeemCode()">Generate Code</button>
-          </div>
-          <div class="card">
-            <div class="card-title">Milestone Settings</div>
-            <div class="form-group">
-              <label class="form-label">100 Ads Reward</label>
-              <input type="number" step="0.01" class="form-input" id="milestone100" placeholder="USDT amount">
-            </div>
-            <div class="form-group">
-              <label class="form-label">200 Ads Reward</label>
-              <input type="number" step="0.01" class="form-input" id="milestone200" placeholder="USDT amount">
-            </div>
-            <div class="form-group">
-              <label class="form-label">500 Ads Reward</label>
-              <input type="number" step="0.01" class="form-input" id="milestone500" placeholder="USDT amount">
-            </div>
-            <button class="btn-primary" onclick="updateMilestones()">Update Milestones</button>
-          </div>
-        </div>
-
-        <div class="card">
-          <div class="card-title">User Balance Management</div>
-          <div class="form-group">
-            <label class="form-label">User ID</label>
-            <input type="text" class="form-input" id="balanceUserId" placeholder="Enter user ID">
-          </div>
-          <div class="form-group">
-            <label class="form-label">Amount</label>
-            <input type="number" step="0.01" class="form-input" id="balanceAmount" placeholder="Enter amount">
-          </div>
-          <div class="form-group">
-            <label class="form-label">Action</label>
-            <select class="form-select" id="balanceAction">
-              <option value="add">Add Balance</option>
-              <option value="subtract">Subtract Balance</option>
-              <option value="set">Set Balance</option>
-            </select>
-          </div>
-          <button class="btn-primary" onclick="updateUserBalance()">Update Balance</button>
-        </div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-    }
-
-    // Global Functions
-    window.editUser = function(userId){
-      const newBalance = prompt('Enter new balance:', '0');
-      if(newBalance !== null){
-        update(ref(rtdb, `users/${userId}`), { usdtBalance: parseFloat(newBalance) })
-          .then(() => notify('User balance updated'))
-          .catch(() => notify('Failed to update balance'));
-      }
-    };
-
-    window.banUser = function(userId){
-      if(confirm('Are you sure you want to ban this user?')){
-        update(ref(rtdb, `users/${userId}`), { banned: true })
-          .then(() => notify('User banned'))
-          .catch(() => notify('Failed to ban user'));
-      }
-    };
-
-    window.approveDeposit = function(depositId, userId, amount){
-      // Update deposit status
-      update(ref(rtdb, `admin/deposits/${depositId}`), { status: 'approved' })
-        .then(() => {
-          // Add balance to user
-          get(ref(rtdb, `users/${userId}`)).then(s => {
-            if(s.exists()){
-              const user = s.val();
-              const newBalance = (user.usdtBalance || 0) + amount;
-              update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance })
-                .then(() => {
-                  sendBot(`‚úÖ <b>Deposit Approved</b>\nAmount: $${amount.toFixed(2)} USDT\nStatus: Approved\nBalance: $${newBalance.toFixed(6)} USDT`, userId);
-                  notify('Deposit approved');
-                  renderDeposits();
-                });
-            }
-          });
-        });
-    };
-
-    window.rejectDeposit = function(depositId, userId){
-      update(ref(rtdb, `admin/deposits/${depositId}`), { status: 'rejected' })
-        .then(() => {
-          sendBot(`‚ùå <b>Deposit Rejected</b>\nYour deposit request has been rejected. Please contact support if you have any questions.`, userId);
-          notify('Deposit rejected');
-          renderDeposits();
-        });
-    };
-
-    window.approveWithdrawal = function(withdrawalId, userId, amount){
-      // Update withdrawal status
-      update(ref(rtdb, `admin/withdrawals/${withdrawalId}`), { status: 'approved' })
-        .then(() => {
-          // Subtract balance from user
-          get(ref(rtdb, `users/${userId}`)).then(s => {
-            if(s.exists()){
-              const user = s.val();
-              const newBalance = Math.max(0, (user.usdtBalance || 0) - amount);
-              update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance })
-                .then(() => {
-                  sendBot(`‚úÖ <b>Withdrawal Approved</b>\nAmount: $${amount.toFixed(2)} USDT\nStatus: Approved\nBalance: $${newBalance.toFixed(6)} USDT`, userId);
-                  notify('Withdrawal approved');
-                  renderWithdrawals();
-                });
-            }
-          });
-        });
-    };
-
-    window.rejectWithdrawal = function(withdrawalId, userId, amount){
-      update(ref(rtdb, `admin/withdrawals/${withdrawalId}`), { status: 'rejected' })
-        .then(() => {
-          sendBot(`‚ùå <b>Withdrawal Rejected</b>\nYour withdrawal request has been rejected. Please contact support if you have any questions.`, userId);
-          notify('Withdrawal rejected');
-          renderWithdrawals();
-        });
-    };
-
-    window.addTask = function(){
-      const name = document.getElementById('taskName').value;
-      const category = document.getElementById('taskCategory').value;
-      const amount = parseFloat(document.getElementById('taskAmount').value);
-      const link = document.getElementById('taskLink').value;
-      const photo = document.getElementById('taskPhoto').value;
-
-      if(!name || !amount || !link || !photo){
-        notify('Please fill all fields');
-        return;
-      }
-
-      const taskId = 'task_' + Date.now();
-      set(ref(rtdb, `tasks/${taskId}`), {
-        name, category, amount, link, photo, createdAt: Date.now()/1000
-      }).then(() => {
-        notify('Task added successfully');
-        document.getElementById('taskName').value = '';
-        document.getElementById('taskAmount').value = '';
-        document.getElementById('taskLink').value = '';
-        document.getElementById('taskPhoto').value = '';
-        loadTasks();
-      });
-    };
-
-    window.deleteTask = function(taskId){
-      if(confirm('Are you sure you want to delete this task?')){
-        remove(ref(rtdb, `tasks/${taskId}`))
-          .then(() => {
-            notify('Task deleted');
-            loadTasks();
-          });
-      }
-    };
-
-    window.generateRedeemCode = function(){
-      const maxUsers = parseInt(document.getElementById('redeemMaxUsers').value);
-      const pool = parseFloat(document.getElementById('redeemPool').value);
-
-      if(!maxUsers || !pool){
-        notify('Please fill all fields');
-        return;
-      }
-
-      const code = Math.random().toString(36).substring(2, 10).toUpperCase();
-      set(ref(rtdb, `redeemCodes/${code}`), {
-        maxUsers, pool, used: 0, createdAt: Date.now()/1000
-      }).then(() => {
-        notify(`Redeem code generated: ${code}`);
-        document.getElementById('redeemMaxUsers').value = '';
-        document.getElementById('redeemPool').value = '';
-      });
-    };
-
-    window.updateMilestones = function(){
-      const m100 = parseFloat(document.getElementById('milestone100').value);
-      const m200 = parseFloat(document.getElementById('milestone200').value);
-      const m500 = parseFloat(document.getElementById('milestone500').value);
-
-      if(!m100 || !m200 || !m500){
-        notify('Please fill all fields');
-        return;
-      }
-
-      set(ref(rtdb, 'milestoneSettings'), { milestone100: m100, milestone200: m200, milestone500: m500 })
-        .then(() => {
-          notify('Milestone settings updated');
-        });
-    };
-
-    window.updateUserBalance = function(){
-      const userId = document.getElementById('balanceUserId').value;
-      const amount = parseFloat(document.getElementById('balanceAmount').value);
-      const action = document.getElementById('balanceAction').value;
-
-      if(!userId || !amount){
-        notify('Please fill all fields');
-        return;
-      }
-
-      get(ref(rtdb, `users/${userId}`)).then(s => {
-        if(s.exists()){
-          const user = s.val();
-          let newBalance = user.usdtBalance || 0;
-          
-          switch(action){
-            case 'add': newBalance += amount; break;
-            case 'subtract': newBalance = Math.max(0, newBalance - amount); break;
-            case 'set': newBalance = amount; break;
-          }
-
-          update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance })
-            .then(() => {
-              sendBot(`üí∞ <b>Balance Updated</b>\nAction: ${action}\nAmount: $${amount.toFixed(2)} USDT\nNew Balance: $${newBalance.toFixed(6)} USDT`, userId);
-              notify('User balance updated');
-              document.getElementById('balanceUserId').value = '';
-              document.getElementById('balanceAmount').value = '';
-            });
-        } else {
-          notify('User not found');
-        }
-      });
-    };
-
-    // Nav events
-    document.querySelectorAll('.nav-btn').forEach(btn=>{
-      btn.addEventListener('click', ()=>showTab(btn.dataset.tab));
-    });
-
-    // Initialize
-    showTab('dashboard');
-  </script>
-</body>
-</html>
-```
-
-
-
-
-
-here Is the index.html and admin.html script but here the png of usdtthe pngd of the coins are not correct also the png of blow buttons fix those and give correct pngs and on wallet section on  deposit withdraw deposit history withdraw history activities trades button don't emoji use pngs and on deposit withdraw history show an randomly generated deposit id and wirthdraw id and keep inside copy button png and the referral tracking not working properly fix those make sure the rewards are beeign adding on main balance and also 10% commission of refferals earning realtime and show refferals balance name total commission earned thoes and when submitting deposit requests its not going on admin panel fix it and on admin panel add more features and on index side on the deposit and withdraw history section history going out of screen fix it and will not go out of screen  and just withdraw request going on the admin panel but when iam approving status not changing on users site and make sure all status of deposit and withdraw status changing real time 
-
----
-
-**Cursor**
-
-I'll fix all the issues you mentioned and create a comprehensive solution. Let me start by creating the updated index.html with proper PNGs, fixed UI, and working referral system.
-
-
-```html
-<!DOCTYPE html>
-<html lang="en">
-<head>
-  <meta charset="UTF-8" />
-  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" />
-  <title>Exotix Trade | Professional Trading Platform</title>
-  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/825/825454.png" />
-  <link rel="preconnect" href="https://fonts.googleapis.com">
-  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
-  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
-
-  <!-- Telegram WebApp SDK -->
-  <script src="https://telegram.org/js/telegram-web-app.js"></script>
-
-  <!-- Monetag SDK -->
-  <script src="//libtl.com/sdk.js" data-zone="9970324" data-sdk="show_9970324"></script>
-
-  <!-- Chart.js -->
-  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
-
-  <style>
-    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
-    :root{
-      --primary-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
-      --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-      --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
-      --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
-      --danger-gradient: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
-      --dark-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
-      --card-bg: rgba(255,255,255,0.05);
-      --card-border: rgba(255,255,255,0.1);
-      --text-primary: #ffffff; 
-      --text-secondary: #a0a0a0;
-      --accent-blue: #3b82f6;
-      --accent-green: #10b981;
-      --accent-yellow: #f59e0b;
-      --accent-red: #ef4444;
-      --shadow-md: 0 4px 16px rgba(0,0,0,0.3); 
-      --shadow-lg: 0 8px 32px rgba(0,0,0,0.4);
-    }
-    html,body{width:100%;height:100%;font-family:'Inter',system-ui,Segoe UI,sans-serif;background:var(--dark-bg);color:var(--text-primary);overflow-x:hidden}
-    #app{display:block;min-height:100vh;padding-bottom:80px;background:var(--dark-bg);background-attachment:fixed}
-    #main-content{width:100%;max-width:480px;margin:0 auto;padding:0 16px}
-
-    /* USDT Balance */
-    .usdt-balance{position:fixed;top:12px;left:12px;background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:8px 12px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);display:flex;align-items:center;gap:8px;z-index:1000}
-    .usdt-icon{width:22px;height:22px;border-radius:50%}
-    .usdt-amount{font-size:14px;font-weight:700;color:var(--accent-green)}
-
-    /* Sections */
-    .section-header{text-align:center;padding:20px 0 16px}
-    .section-title{font-size:24px;font-weight:800;background:var(--success-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
-    .section-subtitle{font-size:13px;color:var(--text-secondary)}
-
-    /* Cards */
-    .card{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:16px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:12px}
-
-    /* Buttons */
-    .btn-primary,.btn-claim{width:100%;padding:12px;border:none;border-radius:12px;font-size:14px;font-weight:700;color:#fff;cursor:pointer;transition:.2s;letter-spacing:.3px}
-    .btn-primary{background:var(--success-gradient);box-shadow:0 4px 12px rgba(17,153,142,.3)}
-    .btn-primary:disabled{background:rgba(255,255,255,.1);color:rgba(255,255,255,.4);cursor:not-allowed}
-    .btn-claim{background:var(--warning-gradient);color:#fff;animation:glow 2s ease-in-out infinite}
-    @keyframes glow{0%,100%{box-shadow:0 0 10px rgba(240,147,251,.5)}50%{box-shadow:0 0 20px rgba(240,147,251,.8)}}
-
-    /* Trade plans */
-    .live-prices{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
-    .price-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:12px;text-align:center}
-    .price-symbol{font-size:12px;color:var(--text-secondary);font-weight:600}
-    .price-value{font-size:16px;font-weight:800;color:var(--accent-green)}
-    .price-change{font-size:11px;font-weight:700;margin-top:4px}
-    .price-change.positive{color:var(--accent-green)} .price-change.negative{color:var(--accent-red)}
-    .plan{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
-    .plan-h{display:flex;align-items:center;gap:12px;margin-bottom:12px}
-    .plan-ic{width:48px;height:48px;border-radius:12px;background:rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;font-size:22px}
-    .plan-ic img{width:32px;height:32px;border-radius:8px}
-    .plan-tt{font-size:16px;font-weight:800}
-    .plan-pr{font-size:13px;color:var(--accent-blue);font-weight:700}
-    .plan-g{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
-    .g-it{background:rgba(255,255,255,.05);border-radius:10px;padding:10px;text-align:center}
-    .g-l{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
-    .g-v{font-size:14px;font-weight:800}
-
-    .prog{margin:8px 0}
-    .progbar{height:8px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden}
-    .progfill{height:100%;background:var(--success-gradient);width:0%}
-    .progtext{text-align:center;font-size:11px;color:var(--text-secondary);margin-top:6px}
-    .countdown{text-align:center;font-size:12px;color:var(--accent-blue);font-weight:700;margin:8px 0}
-
-    /* Chart Container */
-    .chart-container{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:12px;margin-bottom:12px}
-    .chart-title{font-size:13px;font-weight:800;text-align:center;margin-bottom:10px;color:var(--accent-blue)}
-
-    /* Wallet */
-    .wallet-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:12px}
-    .wallet-item{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:16px;text-align:center;cursor:pointer;transition:.2s;display:flex;flex-direction:column;align-items:center;gap:8px}
-    .wallet-item:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
-    .wallet-ic{width:32px;height:32px;border-radius:8px}
-    .wallet-label{font-size:12px;font-weight:700}
-    .form-label{font-size:12px;color:var(--text-secondary);font-weight:700;margin-bottom:6px;display:block}
-    .input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
-    .row{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.05);padding:10px;border-radius:10px;margin-bottom:8px}
-    .copy{background:rgba(255,255,255,.12);border:1px solid var(--card-border);border-radius:8px;padding:6px;cursor:pointer;display:flex;align-items:center;gap:4px}
-    .copy img{width:16px;height:16px}
-    .timer{background:rgba(245,87,108,.12);border:2px solid #f5576c;border-radius:12px;padding:12px;text-align:center;margin-bottom:12px}
-    .t-t{color:#f5576c;font-weight:800}
-
-    /* History */
-    .history-container{max-height:400px;overflow-y:auto;padding-right:8px}
-    .history-item{display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,255,255,.05);border-radius:8px;margin-bottom:8px;border:1px solid var(--card-border)}
-    .history-left{flex:1}
-    .history-amount{font-size:16px;font-weight:800;color:var(--accent-green)}
-    .history-id{font-size:11px;color:var(--text-secondary);font-family:monospace;margin-top:4px}
-    .history-right{text-align:right}
-    .history-status{font-size:12px;font-weight:700;padding:4px 8px;border-radius:6px;margin-bottom:4px}
-    .history-status.pending{background:rgba(245,158,11,.2);color:#f59e0b}
-    .history-status.approved{background:rgba(16,185,129,.2);color:#10b981}
-    .history-status.rejected{background:rgba(239,68,68,.2);color:#ef4444}
-    .history-time{font-size:11px;color:var(--text-secondary)}
-
-    /* Earn */
-    .stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:12px}
-    .stat-box{background:rgba(255,255,255,.05);border:1px solid var(--card-border);border-radius:12px;padding:10px;text-align:center}
-    .stat-box-label{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
-    .stat-box-value{font-size:16px;font-weight:800;color:var(--accent-green)}
-    .ad-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px;text-align:center}
-    .ad-title{font-size:16px;font-weight:800}
-    .ad-reward{font-size:12px;color:var(--accent-blue);font-weight:700;margin:6px 0}
-
-    /* Milestone */
-    .milestone-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
-    .milestone-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
-    .milestone-icon{width:48px;height:48px;border-radius:12px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
-    .milestone-icon img{width:32px;height:32px}
-    .milestone-info{flex:1}
-    .milestone-title{font-size:16px;font-weight:800}
-    .milestone-reward{font-size:13px;color:var(--accent-green);font-weight:700}
-    .milestone-progress{margin:8px 0}
-    .milestone-bar{height:8px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden}
-    .milestone-fill{height:100%;background:var(--success-gradient);width:0%}
-    .milestone-text{text-align:center;font-size:11px;color:var(--text-secondary);margin-top:6px}
-
-    /* Tasks */
-    .task-category{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
-    .category-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
-    .category-icon{width:40px;height:40px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
-    .category-icon img{width:24px;height:24px}
-    .category-title{font-size:16px;font-weight:800}
-    .task-card{display:flex;gap:12px;align-items:center;background:rgba(255,255,255,.05);border:1px solid var(--card-border);border-radius:12px;padding:12px;margin-bottom:8px}
-    .task-image{width:52px;height:52px;border-radius:10px;object-fit:cover;border:2px solid var(--accent-blue)}
-    .task-info{flex:1}
-    .task-name{font-size:14px;font-weight:700}
-    .task-reward{font-size:12px;color:var(--accent-green);font-weight:800}
-    .task-btn{padding:8px 14px;border:none;border-radius:10px;background:var(--success-gradient);color:#fff;font-weight:800;cursor:pointer}
-    .task-btn.completed{background:rgba(255,255,255,.12);color:rgba(255,255,255,.5);cursor:not-allowed}
-
-    /* Referrals */
-    .referral-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
-    .referral-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
-    .referral-icon{width:40px;height:40px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
-    .referral-icon img{width:24px;height:24px}
-    .referral-title{font-size:16px;font-weight:800}
-    .referral-stats{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
-    .referral-stat{background:rgba(255,255,255,.05);border-radius:10px;padding:12px;text-align:center}
-    .referral-stat-label{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
-    .referral-stat-value{font-size:16px;font-weight:800;color:var(--accent-green)}
-    .referral-item{display:flex;align-items:center;gap:12px;background:rgba(255,255,255,.05);border-radius:10px;padding:12px;margin-bottom:8px}
-    .referral-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid var(--accent-blue)}
-    .referral-info{flex:1}
-    .referral-name{font-size:14px;font-weight:700}
-    .referral-id{font-size:12px;color:var(--text-secondary)}
-    .referral-balance{font-size:14px;font-weight:800;color:var(--accent-green)}
-    .referral-commission{font-size:12px;color:var(--accent-blue);font-weight:700}
-
-    /* Ranking */
-    .ranking-row{display:flex;align-items:center;gap:10px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:10px;margin-bottom:8px}
-    .ranking-position-num{width:36px;height:36px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center;font-weight:800}
-    .ranking-position-num.top3{background:var(--secondary-gradient)}
-    .ranking-avatar{width:44px;height:44px;border-radius:50%;border:2px solid var(--accent-blue);object-fit:cover}
-    .ranking-user-info{flex:1}
-    .ranking-user-name{font-size:13px;font-weight:700}
-    .ranking-user-id{font-size:11px;color:var(--text-secondary)}
-    .ranking-balance{font-size:14px;font-weight:800;color:var(--accent-green)}
-    .ranking-position{text-align:center;padding:14px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;margin-bottom:12px}
-
-    /* Notification */
-    .notification{position:fixed;top:16px;left:50%;transform:translateX(-50%);background:var(--success-gradient);color:#fff;padding:12px 20px;border-radius:12px;font-size:13px;font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:10000}
-
-    /* Nav */
-    .nav-bar{position:fixed;bottom:0;left:0;width:100%;background:rgba(12,12,12,.95);backdrop-filter:blur(20px);border-top:1px solid var(--card-border);display:flex;justify-content:space-around;padding:10px 0 8px;z-index:1000;box-shadow:0 -4px 16px rgba(0,0,0,.2)}
-    .nav-btn{flex:1;background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;transition:.2s;padding:8px;border-radius:12px}
-    .nav-icon{width:30px;height:30px;border-radius:10px;filter:grayscale(100%) brightness(.7)}
-    .nav-label{font-size:11px;font-weight:700;color:var(--text-secondary)}
-    .nav-btn.active .nav-icon{filter:grayscale(0%) brightness(1);box-shadow:0 4px 12px rgba(59,130,246,.4)}
-    .nav-btn.active .nav-label{color:var(--accent-blue)}
-
-    @media(max-width:360px){
-      .live-prices{grid-template-columns:1fr}
-      .wallet-grid{grid-template-columns:1fr}
-    }
-  </style>
-</head>
-<body>
-  <!-- App -->
-  <div id="app">
-    <div class="usdt-balance">
-      <img src="https://cdn-icons-png.flaticon.com/512/825/825454.png" class="usdt-icon" alt="USDT" />
-      <div class="usdt-amount" id="usdtBalance">0.000000</div>
-    </div>
-    <div id="main-content"></div>
-
-    <!-- Navigation Bar -->
-    <div class="nav-bar">
-      <button class="nav-btn active" data-tab="home">
-        <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Trade Plans" class="nav-icon" />
-        <span class="nav-label">Trade Plans</span>
-      </button>
-      <button class="nav-btn" data-tab="wallet">
-        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Wallet" class="nav-icon" />
-        <span class="nav-label">Wallet</span>
-      </button>
-      <button class="nav-btn" data-tab="earn">
-        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Earn" class="nav-icon" />
-        <span class="nav-label">Earn</span>
-      </button>
-      <button class="nav-btn" data-tab="profile">
-        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Profile" class="nav-icon" />
-        <span class="nav-label">Profile</span>
-      </button>
-      <button class="nav-btn" data-tab="ranking">
-        <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Ranking" class="nav-icon" />
-        <span class="nav-label">Ranking</span>
-      </button>
-    </div>
-  </div>
-
-  <script type="module">
-    // Firebase v9 Modular
-    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
-    import {
-      getDatabase, ref, get, set, update, onValue, off, push, query, orderByChild, equalTo, runTransaction
-    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
-    import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';
-
-    // Config
-    const firebaseConfig = {
-      apiKey: "AIzaSyBfR97veh6idxb81mH6N5_Gq8-CpW2D7bE",
-      authDomain: "jbhigfi.firebaseapp.com",
-      databaseURL: "https://jbhigfi-default-rtdb.firebaseio.com",
-      projectId: "jbhigfi",
-      storageBucket: "jbhigfi.firebasestorage.app",
-      messagingSenderId: "736760492095",
-      appId: "1:736760492095:web:47b94412495e21c561c88a",
-      measurementId: "G-ZZMHC9RTVT"
-    };
-
-    const app = initializeApp(firebaseConfig);
-    const rtdb = getDatabase(app);
-    getAnalytics(app);
-
-    // Telegram init
-    const tg = window.Telegram?.WebApp || { expand:()=>{}, ready:()=>{}, initDataUnsafe:{} };
-    tg.expand(); tg.ready();
-
-    // Bot
-    const BOT_TOKEN = '8332448822:AAHKhDvougBhBThL6aBl3hGjZbKFGAq7BUs';
-    const sendBot = async (msg) => {
-      try {
-        const chatId = userId;
-        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
-          method: 'POST', headers: { 'Content-Type': 'application/json' },
-          body: JSON.stringify({ chat_id: chatId, text: msg, parse_mode: 'HTML' })
-        });
-      } catch (e) { console.warn('Bot send failed', e); }
-    };
-
-    // State
-    let userId=null, userName=null, userAvatar=null;
-    let userData=null;
-    let usdtBalance=0;
-    let purchasedPlans={};
-    let activeTrades={};
-    let depositHistory=[];
-    let withdrawHistory=[];
-    let tradeHistory=[];
-    let cryptoPrices={};
-    let rankingListener=null;
-    let adLoading=false;
-    let pendingTaskRewards={};
-    let depositListener=null;
-    let withdrawListener=null;
-
-    // Utils
-    const now = () => Math.floor(Date.now()/1000);
-    const fmt = (n)=> Number(n||0).toFixed(6);
-    const notify = (m, d=2200) => { const n=document.createElement('div'); n.className='notification'; n.textContent=m; document.body.appendChild(n); setTimeout(()=>n.remove(), d); };
-    const copy = (t)=> navigator.clipboard.writeText(t).then(()=>notify('Copied!'));
-    const generateId = () => Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
-
-    // Telegram User
-    function getTelegramUserData() {
-      const u = tg?.initDataUnsafe?.user;
-      if (u?.id) {
-        userId = String(u.id);
-        userName = u.first_name + (u.last_name ? (' ' + u.last_name) : '');
-        userAvatar = u.photo_url || "https://cdn-icons-png.flaticon.com/512/1077/1077114.png";
-        return true;
-      }
-      // Fallback outside Telegram
-      userId = 'test_' + Math.floor(10000 + Math.random()*89999);
-      userName = 'Test User';
-      userAvatar = "https://cdn-icons-png.flaticon.com/512/1077/1077114.png";
-      return true;
-    }
-
-    // Prices
-    async function loadCryptoPrices(){
-      try{
-        const url='https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,binancecoin,cardano,solana,polkadot,polygon,avalanche-2,chainlink,uniswap,cosmos,fantom,near,algorand,vechain,internet-computer,filecoin,tron,stellar,eos&vs_currencies=usd&include_24hr_change=true';
-        const r=await fetch(url); const d=await r.json();
-        cryptoPrices = {
-          BTC:{ price:d.bitcoin?.usd||3000, change:d.bitcoin?.usd_24h_change||0 },
-          ETH:{ price:d.ethereum?.usd||2000, change:d.ethereum?.usd_24h_change||0 },
-          BNB:{ price:d.binancecoin?.usd||300, change:d.binancecoin?.usd_24h_change||0 },
-          ADA:{ price:d.cardano?.usd||0.5, change:d.cardano?.usd_24h_change||0 },
-          SOL:{ price:d.solana?.usd||100, change:d.solana?.usd_24h_change||0 },
-          DOT:{ price:d.polkadot?.usd||7, change:d.polkadot?.usd_24h_change||0 },
-          MATIC:{ price:d.polygon?.usd||0.8, change:d.polygon?.usd_24h_change||0 },
-          AVAX:{ price:d['avalanche-2']?.usd||25, change:d['avalanche-2']?.usd_24h_change||0 },
-          LINK:{ price:d.chainlink?.usd||15, change:d.chainlink?.usd_24h_change||0 },
-          UNI:{ price:d.uniswap?.usd||6, change:d.uniswap?.usd_24h_change||0 },
-          ATOM:{ price:d.cosmos?.usd||8, change:d.cosmos?.usd_24h_change||0 },
-          FTM:{ price:d.fantom?.usd||0.3, change:d.fantom?.usd_24h_change||0 },
-          NEAR:{ price:d.near?.usd||3, change:d.near?.usd_24h_change||0 },
-          ALGO:{ price:d.algorand?.usd||0.2, change:d.algorand?.usd_24h_change||0 },
-          VET:{ price:d.vechain?.usd||0.03, change:d.vechain?.usd_24h_change||0 },
-          ICP:{ price:d['internet-computer']?.usd||4, change:d['internet-computer']?.usd_24h_change||0 },
-          FIL:{ price:d.filecoin?.usd||5, change:d.filecoin?.usd_24h_change||0 },
-          TRX:{ price:d.tron?.usd||0.1, change:d.tron?.usd_24h_change||0 },
-          XLM:{ price:d.stellar?.usd||0.12, change:d.stellar?.usd_24h_change||0 },
-          EOS:{ price:d.eos?.usd||0.7, change:d.eos?.usd_24h_change||0 }
-        };
-      }catch(e){ 
-        cryptoPrices = { 
-          BTC:{price:3000,change:0}, ETH:{price:2000,change:0}, BNB:{price:300,change:0}, ADA:{price:0.5,change:0}, SOL:{price:100,change:0},
-          DOT:{price:7,change:0}, MATIC:{price:0.8,change:0}, AVAX:{price:25,change:0}, LINK:{price:15,change:0}, UNI:{price:6,change:0},
-          ATOM:{price:8,change:0}, FTM:{price:0.3,change:0}, NEAR:{price:3,change:0}, ALGO:{price:0.2,change:0}, VET:{price:0.03,change:0},
-          ICP:{price:4,change:0}, FIL:{price:5,change:0}, TRX:{price:0.1,change:0}, XLM:{price:0.12,change:0}, EOS:{price:0.7,change:0}
-        }; 
-      }
-    }
-
-    // Plans with crypto icons
-    const TRADE_PLANS = [
-      { id:'plan1', name:'BTC/USDT', price:40, dailyEarning:4, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan2', name:'ETH/USDT', price:50, dailyEarning:5, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan3', name:'BNB/USDT', price:60, dailyEarning:6, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan4', name:'ADA/USDT', price:70, dailyEarning:7, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan5', name:'SOL/USDT', price:80, dailyEarning:8, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan6', name:'DOT/USDT', price:90, dailyEarning:9, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan7', name:'MATIC/USDT', price:100, dailyEarning:10, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan8', name:'AVAX/USDT', price:120, dailyEarning:12, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan9', name:'LINK/USDT', price:140, dailyEarning:14, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan10',name:'UNI/USDT', price:160, dailyEarning:16, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan11',name:'ATOM/USDT',price:180, dailyEarning:18, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan12',name:'FTM/USDT', price:200, dailyEarning:20, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan13',name:'NEAR/USDT',price:250, dailyEarning:25, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan14',name:'ALGO/USDT',price:300, dailyEarning:30, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan15',name:'VET/USDT', price:350, dailyEarning:35, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan16',name:'ICP/USDT', price:400, dailyEarning:40, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan17',name:'FIL/USDT', price:500, dailyEarning:50, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan18',name:'TRX/USDT', price:600, dailyEarning:60, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan19',name:'XLM/USDT', price:700, dailyEarning:70, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
-      { id:'plan20',name:'EOS/USDT', price:800, dailyEarning:80, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' }
-    ];
-
-    // DB helpers
-    const userRef = (uid)=> ref(rtdb, 'users/'+uid);
-
-    async function loadUser() {
-      const snap = await get(userRef(userId));
-      if (snap.exists()) return snap.val();
-      const init = {
-        usdtBalance:0, purchasedPlans:{}, activeTrades:{},
-        depositHistory:[], withdrawHistory:[], tradeHistory:[],
-        avatar:userAvatar, name:userName, referrals:0, completedTasks:{},
-        adStats:{ today:0, yesterday:0, thisWeek:0, thisMonth:0, lifetime:0, lastAdDate: todayISO(), lastWeekReset: weekStartISO(), lastMonthReset: monthStartISO() },
-        milestones:{ milestone100Claimed:false, milestone200Claimed:false, milestone500Claimed:false },
-        referralCommissions:{}, totalReferralCommission:0, createdAt: now(),
-        referredBy: null, referralCode: null
-      };
-      await set(userRef(userId), init);
-      return init;
-    }
-
-    function todayISO(){ return new Date().toISOString().split('T')[0]; }
-    function weekStartISO(){
-      const d=new Date(); const day=d.getDay(); const diff=d.getDate()-day+(day===0?-6:1); d.setDate(diff);
-      return d.toISOString().split('T')[0];
-    }
-    function monthStartISO(){ const d=new Date(); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-01`; }
-
-    function save(partial){
-      userData = { ...userData, ...partial };
-      update(userRef(userId), partial).catch(()=>{});
-      // local fallback
-      localStorage.setItem('exotix_user_'+userId, JSON.stringify(userData));
-      if (partial.usdtBalance!==undefined) {
-        usdtBalance = partial.usdtBalance;
-        document.getElementById('usdtBalance').textContent = fmt(usdtBalance);
-      }
-    }
-
-    // Tabs
-    function showTab(tab){
-      document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
-      if(tab==='home') renderHome();
-      if(tab==='wallet') renderWallet();
-      if(tab==='earn') renderEarn();
-      if(tab==='profile') renderProfile();
-      if(tab==='ranking') renderRanking();
-    }
-
-    // Home (Trade Plans)
-    function formatTime(s){ s=Math.max(0,s|0); const h=(s/3600)|0; const m=((s%3600)/60)|0; const sec=s%60; return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`; }
-
-    function renderHome(){
-      const btc = cryptoPrices.BTC||{price:3000,change:0};
-      const eth = cryptoPrices.ETH||{price:2000,change:0};
-
-      const html = `
-        <div class="section-header">
-          <div class="section-title">Trade Plans</div>
-          <div class="section-subtitle">Invest and claim earnings every 24 hours</div>
-        </div>
-
-        <div class="live-prices">
-          <div class="price-card">
-            <div class="price-symbol">BTC/USDT</div>
-            <div class="price-value">$${(btc.price||3000).toFixed(2)}</div>
-            <div class="price-change ${btc.change>=0?'positive':'negative'}">${(btc.change>=0?'+':'')}${(btc.change||0).toFixed(2)}%</div>
-          </div>
-          <div class="price-card">
-            <div class="price-symbol">ETH/USDT</div>
-            <div class="price-value">$${(eth.price||2000).toFixed(2)}</div>
-            <div class="price-change ${eth.change>=0?'positive':'negative'}">${(eth.change>=0?'+':'')}${(eth.change||0).toFixed(2)}%</div>
-          </div>
-        </div>
-
-        ${TRADE_PLANS.map(p=>{
-          const purchased = !!purchasedPlans[p.id];
-          const tr = activeTrades[p.id];
-          const canClaim = tr ? (now()-tr.lastClaim)>=86400 : false;
-          const prog = tr ? (tr.claimedDays/p.duration*100) : 0;
-          const cryptoPrice = cryptoPrices[p.name.split('/')[0]] || {price: 100, change: 0};
-
-          return `
-            <div class="plan">
-              <div class="plan-h">
-                <div class="plan-ic">
-                  <img src="${p.icon}" alt="${p.name}" />
-                </div>
-                <div>
-                  <div class="plan-tt">${p.name}</div>
-                  <div class="plan-pr">$${p.price} USDT</div>
-                </div>
-              </div>
-
-              <div class="chart-container">
-                <div class="chart-title">Live ${p.name} Chart</div>
-                <iframe src="https://www.tradingview.com/widgetembed/?symbol=BINANCE:${p.name.split('/')[0]}USDT&interval=1&theme=dark" width="100%" height="200" frameborder="0"></iframe>
-              </div>
-
-              <div class="plan-g">
-                <div class="g-it">
-                  <div class="g-l">Daily Earning</div>
-                  <div class="g-v">$${p.dailyEarning}</div>
-                </div>
-                <div class="g-it">
-                  <div class="g-l">Duration</div>
-                  <div class="g-v">${p.duration} days</div>
-                </div>
-              </div>
-
-              ${tr ? `
-                <div class="prog">
-                  <div class="progbar"><div class="progfill" style="width:${prog}%"></div></div>
-                  <div class="progtext">Progress: ${tr.claimedDays}/${p.duration} days</div>
-                </div>
-                <div class="countdown" id="cd_${p.id}">Next claim in: ${formatTime(86400-(now()-tr.lastClaim))}</div>
-                <button class="btn-claim" id="claim_${p.id}" ${canClaim?'':'disabled'}>${canClaim?`Claim $${p.dailyEarning}`:'Wait'}</button>
-              ` : `
-                <button class="btn-primary" id="buy_${p.id}" ${usdtBalance<p.price?'disabled':''}>${purchased?'Purchased':'Buy Plan'}</button>
-              `}
-            </div>
-          `;
-        }).join('')}
-      `;
-      document.getElementById('main-content').innerHTML = html;
-
-      // Bind
-      TRADE_PLANS.forEach(p=>{
-        const buy=document.getElementById(`buy_${p.id}`);
-        const claim=document.getElementById(`claim_${p.id}`);
-        if(buy){
-          buy.addEventListener('click', ()=>{
-            if (purchasedPlans[p.id]) { notify('Already purchased'); return; }
-            if (usdtBalance < p.price) { notify('Insufficient balance'); return; }
-            const newBal=usdtBalance - p.price;
-            const newPurchased = { ...purchasedPlans, [p.id]:true };
-            const newTrades = { ...activeTrades, [p.id]:{ planId:p.id, purchasedAt:now(), lastClaim:now(), claimedDays:0, totalEarned:0 } };
-            save({ usdtBalance:newBal, purchasedPlans:newPurchased, activeTrades:newTrades });
-            tradeHistory.push({ type:'purchase', planId:p.id, planName:p.name, amount:p.price, timestamp:now() });
-            save({ tradeHistory });
-            sendBot(`üéâ <b>Plan Purchased</b>\nPlan: ${p.name}\nAmount: $${p.price} USDT\nDaily: $${p.dailyEarning}\nDuration: ${p.duration} days`);
-            notify(`Purchased ${p.name}`);
-            renderHome();
-          });
-        }
-        if(claim){
-          claim.addEventListener('click', ()=>{
-            const tr=activeTrades[p.id]; if(!tr) return;
-            if ((now()-tr.lastClaim)<86400){ notify('Claim available every 24h'); return; }
-            const earned=p.dailyEarning;
-            const newBal=usdtBalance+earned;
-            tr.lastClaim=now(); tr.claimedDays+=1; tr.totalEarned+=earned;
-            if (tr.claimedDays>=p.duration){
-              const copy={...activeTrades}; delete copy[p.id];
-              save({ usdtBalance:newBal, activeTrades:copy });
-              notify(`Plan completed. Total earned $${tr.totalEarned}`);
-              sendBot(`üèÜ <b>Plan Completed</b>\nPlan: ${p.name}\nTotal Earned: $${tr.totalEarned} USDT`);
-            }else{
-              save({ usdtBalance:newBal, activeTrades:{...activeTrades} });
-              notify(`Claimed $${earned} from ${p.name}`);
-              sendBot(`üí∞ <b>Daily Claimed</b>\nPlan: ${p.name}\nEarned: $${earned} USDT\nProgress: ${tr.claimedDays}/${p.duration}`);
-            }
-            tradeHistory.push({ type:'claim', planId:p.id, planName:p.name, amount:earned, timestamp:now() });
-            save({ tradeHistory });
-            renderHome();
-          });
-        }
-      });
-
-      // Countdowns
-      setInterval(()=>{
-        Object.values(activeTrades).forEach(tr=>{
-          const el=document.getElementById(`cd_${tr.planId}`); if(!el) return;
-          el.textContent = `Next claim in: ${formatTime(86400-(now()-tr.lastClaim))}`;
-        });
-      },1000);
-    }
-
-    // Wallet
-    function renderWallet(){
-      const html = `
-        <div class="section-header">
-          <div class="section-title">Wallet</div>
-          <div class="section-subtitle">Deposit, Withdraw, History, Activities & Trades</div>
-        </div>
-
-        <div class="wallet-grid">
-          <div class="wallet-item" id="w_dep">
-            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Deposit" />
-            <div class="wallet-label">Deposit</div>
-          </div>
-          <div class="wallet-item" id="w_wd">
-            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Withdraw" />
-            <div class="wallet-label">Withdraw</div>
-          </div>
-          <div class="wallet-item" id="w_deph">
-            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Deposit History" />
-            <div class="wallet-label">Deposit History</div>
-          </div>
-          <div class="wallet-item" id="w_wdh">
-            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Withdraw History" />
-            <div class="wallet-label">Withdraw History</div>
-          </div>
-          <div class="wallet-item" id="w_act">
-            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Activities" />
-            <div class="wallet-label">Activities</div>
-          </div>
-          <div class="wallet-item" id="w_trd">
-            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Trades" />
-            <div class="wallet-label">Trades</div>
-          </div>
-        </div>
-        <div id="wallet-content"></div>
-      `;
-      document.getElementById('main-content').innerHTML = html;
-
-      document.getElementById('w_dep').onclick = showDepositForm;
-      document.getElementById('w_wd').onclick = showWithdrawForm;
-      document.getElementById('w_deph').onclick = showDepositHistory;
-      document.getElementById('w_wdh').onclick = showWithdrawHistory;
-      document.getElementById('w_act').onclick = showActivities;
-      document.getElementById('w_trd').onclick = showTrades;
-    }
-
-    function showDepositForm(){
-      const html = `
-        <div class="card">
-          <div class="section-subtitle" style="text-align:center;margin-bottom:8px">Deposit USDT (TON)</div>
-          <label class="form-label">Amount (min $20)</label>
-          <input id="dep_amt" type="number" min="20" step="0.01" class="input" placeholder="Enter amount">
-          <button class="btn-primary" style="margin-top:10px" id="dep_go">Confirm</button>
-        </div>
-      `;
-      document.getElementById('wallet-content').innerHTML = html;
-      document.getElementById('dep_go').onclick = processDeposit;
-    }
-
-    function processDeposit(){
-      const amt = parseFloat(document.getElementById('dep_amt').value);
-      if(!amt || amt<20){ notify('Minimum deposit is $20'); return; }
-      const memo = `ExotixDP_${userId}`;
-      const id = generateId();
-
-      const html = `
-        <div class="card">
-          <div class="timer"><div class="t-t">Complete within 15:00</div><div id="dep_timer" class="t-t" style="font-size:22px;margin-top:6px">15:00</div></div>
-          <img src="https://i.postimg.cc/g2mgknm3/Screenshot-2025-10-17-16-28-28-211-com-ton-keeper-edit.jpg" alt="QR" style="width:200px;height:200px;border-radius:12px;border:2px solid var(--accent-blue);display:block;margin:0 auto 10px">
-          <div class="row"><div>Network</div><div>TON <button class="copy" onclick="navigator.clipboard.writeText('TON')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
-          <div class="row"><div>Address</div><div style="font-family:monospace">UQBWOgFgB4B8qBCo8CNjDUNAtvUSosw4v7v9gkt0GVOaNLSz <button class="copy" id="cp_addr"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
-          <div class="row"><div>Amount</div><div>$${amt.toFixed(2)} <button class="copy" id="cp_amt"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
-          <div class="row"><div>Memo</div><div style="font-family:monospace">${memo} <button class="copy" id="cp_memo"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
-          <label class="form-label" style="margin-top:8px">Transaction Hash</label>
-          <input id="txh" class="input" placeholder="Enter transaction hash">
-          <button class="btn-primary" style="margin-top:10px" id="dep_submit">Confirm Transaction</button>
-        </div>
-      `;
-      document.getElementById('wallet-content').innerHTML = html;
-      document.getElementById('cp_addr').onclick=()=>copy('UQBWOgFgB4B8qBCo8CNjDUNAtvUSosw4v7v9gkt0GVOaNLSz');
-      document.getElementById('cp_amt').onclick=()=>copy(String(amt));
-      document.getElementById('cp_memo').onclick=()=>copy(memo);
-
-      let t=900; const el=document.getElementById('dep_timer');
-      const it=setInterval(()=>{ const m=(t/60|0), s=(t%60); el.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; if(--t<0){clearInterval(it); el.textContent='Expired';} },1000);
-
-      document.getElementById('dep_submit').onclick = async ()=>{
-        const tx = document.getElementById('txh').value.trim();
-        if(!tx){ notify('Enter transaction hash'); return; }
-        const rec = { id, amount:amt, txHash:tx, status:'pending', timestamp:now(), memo };
-        depositHistory.push(rec);
-        save({ depositHistory });
-        try{
-          await push(ref(rtdb,'admin/deposits'), { userId, userName, amount:amt, txHash:tx, memo, timestamp:now(), status:'pending' });
-        }catch{}
-        sendBot(`üí≥ <b>Deposit Submitted</b>\nAmount: $${amt.toFixed(2)} USDT\nStatus: Pending\nTX: ${tx}`);
-        notify('Submitted. Awaiting approval.');
-        showDepositHistory();
-      };
-    }
-
-    function showDepositHistory(){
-      const html = `
-        <div class="card">
-          <div class="section-title" style="font-size:18px">Deposit History</div>
-          <div class="history-container">
-            ${depositHistory.length?depositHistory.map(d=>`
-              <div class="history-item">
-                <div class="history-left">
-                  <div class="history-amount">$${d.amount.toFixed(2)}</div>
-                  <div class="history-id">ID: ${d.id}</div>
-                </div>
-                <div class="history-right">
-                  <div class="history-status ${d.status}">${d.status}</div>
-                  <div class="history-time">${new Date(d.timestamp*1000).toLocaleString()}</div>
-                </div>
-              </div>
-            `).join(''):`<div class="section-subtitle" style="text-align:center">No deposits yet</div>`}
-          </div>
-        </div>
-      `;
-      document.getElementById('wallet-content').innerHTML = html;
-    }
-
-    function showWithdrawForm(){
-      const html = `
-        <div class="card">
-          <div class="section-subtitle" style="text-align:center;margin-bottom:8px">Withdraw USDT (TON)</div>
-          <label class="form-label">TON Address</label>
-          <input id="wd_addr" class="input" placeholder="Enter TON wallet">
-          <label class="form-label" style="margin-top:8px">Amount (min $0.10)</label>
-          <input id="wd_amt" type="number" min="0.10" step="0.01" class="input" placeholder="Enter amount">
-          <label class="form-label" style="margin-top:8px">Memo/Comment (optional)</label>
-          <input id="wd_memo" class="input" placeholder="Enter memo">
-          <button class="btn-primary" style="margin-top:10px" id="wd_go">Confirm Withdraw</button>
-        </div>
-      `;
-      document.getElementById('wallet-content').innerHTML = html;
-      document.getElementById('wd_go').onclick = async ()=>{
-        const addr=document.getElementById('wd_addr').value.trim();
-        const amt=parseFloat(document.getElementById('wd_amt').value);
-        const memo=document.getElementById('wd_memo').value.trim();
-        if(!addr){ notify('Enter address'); return; }
-        if(!amt || amt<0.10){ notify('Minimum $0.10'); return; }
-        if(amt>usdtBalance){ notify('Insufficient balance'); return; }
-        if(depositHistory.length===0){ notify('First time deposit required'); return; }
-        const id=generateId();
-        withdrawHistory.push({ id, amount:amt, address:addr, memo, status:'pending', timestamp:now() });
-        save({ withdrawHistory });
-        try{
-          await push(ref(rtdb,'admin/withdrawals'), { userId, userName, amount:amt, address:addr, memo, timestamp:now(), status:'pending' });
-        }catch{}
-        sendBot(`üí∏ <b>Withdrawal Submitted</b>\nAmount: $${amt.toFixed(2)} USDT\nStatus: Pending\nAddress: ${addr}`);
-        notify('Withdrawal submitted. Awaiting approval.');
-        showWithdrawHistory();
-      };
-    }
-
-    function showWithdrawHistory(){
-      const html = `
-        <div class="card">
-          <div class="section-title" style="font-size:18px">Withdraw History</div>
-          <div class="history-container">
-            ${withdrawHistory.length?withdrawHistory.map(w=>`
-              <div class="history-item">
-                <div class="history-left">
-                  <div class="history-amount">$${w.amount.toFixed(2)}</div>
-                  <div class="history-id">ID: ${w.id}</div>
-                </div>
-                <div class="history-right">
-                  <div class="history-status ${w.status}">${w.status}</div>
-                  <div class="history-time">${new Date(w.timestamp*1000).toLocaleString()}</div>
-                </div>
-              </div>
-            `).join(''):`<div class="section-subtitle" style="text-align:center">No withdrawals yet</div>`}
-          </div>
-        </div>
-      `;
-      document.getElementById('wallet-content').innerHTML = html;
-    }
-
-    function showActivities(){
-      const all=[...depositHistory.map(x=>({...x,type:'deposit'})),...withdrawHistory.map(x=>({...x,type:'withdraw'})),...tradeHistory.map(x=>({...x,type:'trade'}))].sort((a,b)=>b.timestamp-a.timestamp);
-      const html=`
-        <div class="card">
-          <div class="section-title" style="font-size:18px">Activities</div>
-          <div class="history-container">
-            ${all.length?all.map(a=>`
-              <div class="history-item">
-                <div class="history-left">
-                  <div class="history-amount">${a.type==='deposit'?'+':a.type==='withdraw'?'-':''}$${(a.amount||0).toFixed? (a.amount||0).toFixed(2) : a.amount}</div>
-                  <div class="history-id">${a.type.toUpperCase()}</div>
-                </div>
-                <div class="history-right">
-                  <div class="history-time">${new Date(a.timestamp*1000).toLocaleString()}</div>
-
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8" />
+  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" />
+  <title>Exotix Trade Admin Panel</title>
+  <link rel="icon" href="https://cryptologos.cc/logos/tether-usdt-logo.png" />
+  <link rel="preconnect" href="https://fonts.googleapis.com">
+  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
+  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
+
+  <!-- Chart.js -->
+  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
+
+  <style>
+    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
+    :root{
+      --primary-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
+      --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
+      --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
+      --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
+      --danger-gradient: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
+      --dark-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
+      --card-bg: rgba(255,255,255,0.05);
+      --card-border: rgba(255,255,255,0.1);
+      --text-primary: #ffffff; 
+      --text-secondary: #a0a0a0;
+      --accent-blue: #3b82f6;
+      --accent-green: #10b981;
+      --accent-yellow: #f59e0b;
+      --accent-red: #ef4444;
+      --shadow-md: 0 4px 16px rgba(0,0,0,0.3); 
+      --shadow-lg: 0 8px 32px rgba(0,0,0,0.4);
+    }
+    html,body{width:100%;height:100%;font-family:'Inter',system-ui,Segoe UI,sans-serif;background:var(--dark-bg);color:var(--text-primary);overflow-x:hidden}
+    #app{display:block;min-height:100vh;padding-bottom:80px;background:var(--dark-bg);background-attachment:fixed}
+    #main-content{width:100%;max-width:1200px;margin:0 auto;padding:0 16px}
+
+    /* Header */
+    .admin-header{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:16px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:20px;text-align:center}
+    .admin-title{font-size:28px;font-weight:800;background:var(--success-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
+    .admin-subtitle{font-size:14px;color:var(--text-secondary);margin-top:8px}
+
+    /* Stats Grid */
+    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}
+    .stat-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:20px;text-align:center}
+    .stat-icon{width:48px;height:48px;border-radius:12px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center;margin:0 auto 12px}
+    .stat-icon img{width:24px;height:24px}
+    .stat-label{font-size:12px;color:var(--text-secondary);font-weight:700;text-transform:uppercase;margin-bottom:8px}
+    .stat-value{font-size:24px;font-weight:800;color:var(--accent-green)}
+
+    /* Cards */
+    .card{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:20px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:20px}
+    .card-title{font-size:18px;font-weight:800;margin-bottom:16px;color:var(--accent-blue)}
+
+    /* Buttons */
+    .btn-primary,.btn-success,.btn-danger,.btn-warning{padding:10px 16px;border:none;border-radius:8px;font-size:14px;font-weight:700;color:#fff;cursor:pointer;transition:.2s;margin:4px}
+    .btn-primary{background:var(--primary-gradient)}
+    .btn-success{background:var(--success-gradient)}
+    .btn-danger{background:var(--danger-gradient)}
+    .btn-warning{background:var(--warning-gradient)}
+
+    /* Forms */
+    .form-group{margin-bottom:16px}
+    .form-label{font-size:12px;color:var(--text-secondary);font-weight:700;margin-bottom:6px;display:block}
+    .form-input{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
+    .form-select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
+
+    /* Tables */
+    .table{width:100%;border-collapse:collapse;margin-top:16px}
+    .table th,.table td{padding:12px;text-align:left;border-bottom:1px solid var(--card-border)}
+    .table th{background:rgba(255,255,255,.05);font-weight:700;font-size:12px;text-transform:uppercase;color:var(--text-secondary)}
+    .table td{font-size:14px}
+
+    /* Status badges */
+    .status-badge{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase}
+    .status-pending{background:rgba(245,158,11,.2);color:#f59e0b}
+    .status-approved{background:rgba(16,185,129,.2);color:#10b981}
+    .status-rejected{background:rgba(239,68,68,.2);color:#ef4444}
+
+    /* Search */
+    .search-box{width:100%;padding:12px;border-radius:8px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none;margin-bottom:16px}
+
+    /* Grid Layout */
+    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
+    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
+
+    /* Notification */
+    .notification{position:fixed;top:16px;right:16px;background:var(--success-gradient);color:#fff;padding:12px 20px;border-radius:12px;font-size:13px;font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:10000}
+
+    /* Nav */
+    .nav-bar{position:fixed;bottom:0;left:0;width:100%;background:rgba(12,12,12,.95);backdrop-filter:blur(20px);border-top:1px solid var(--card-border);display:flex;justify-content:space-around;padding:10px 0 8px;z-index:1000;box-shadow:0 -4px 16px rgba(0,0,0,.2)}
+    .nav-btn{flex:1;background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;transition:.2s;padding:8px;border-radius:12px}
+    .nav-icon{width:30px;height:30px;border-radius:10px;filter:grayscale(100%) brightness(.7)}
+    .nav-label{font-size:11px;font-weight:700;color:var(--text-secondary)}
+    .nav-btn.active .nav-icon{filter:grayscale(0%) brightness(1);box-shadow:0 4px 12px rgba(59,130,246,.4)}
+    .nav-btn.active .nav-label{color:var(--accent-blue)}
+
+    @media(max-width:768px){
+      .grid-2,.grid-3{grid-template-columns:1fr}
+      .stats-grid{grid-template-columns:repeat(2,1fr)}
+    }
+  </style>
+</head>
+<body>
+  <!-- App -->
+  <div id="app">
+    <div class="admin-header">
+      <div class="admin-title">Exotix Trade Admin Panel</div>
+      <div class="admin-subtitle">Professional Trading Platform Management</div>
+    </div>
+    <div id="main-content"></div>
+
+    <!-- Navigation Bar -->
+    <div class="nav-bar">
+      <button class="nav-btn active" data-tab="dashboard">
+        <img src="https://img.icons8.com/fluency/48/combo-chart.png" alt="Dashboard" class="nav-icon" />
+        <span class="nav-label">Dashboard</span>
+      </button>
+      <button class="nav-btn" data-tab="users">
+        <img src="https://img.icons8.com/fluency/48/user-groups.png" alt="Users" class="nav-icon" />
+        <span class="nav-label">Users</span>
+      </button>
+      <button class="nav-btn" data-tab="deposits">
+        <img src="https://img.icons8.com/fluency/48/money-bag.png" alt="Deposits" class="nav-icon" />
+        <span class="nav-label">Deposits</span>
+      </button>
+      <button class="nav-btn" data-tab="withdrawals">
+        <img src="https://img.icons8.com/fluency/48/money-transfer.png" alt="Withdrawals" class="nav-icon" />
+        <span class="nav-label">Withdrawals</span>
+      </button>
+      <button class="nav-btn" data-tab="tasks">
+        <img src="https://img.icons8.com/fluency/48/checklist.png" alt="Tasks" class="nav-icon" />
+        <span class="nav-label">Tasks</span>
+      </button>
+      <button class="nav-btn" data-tab="settings">
+        <img src="https://img.icons8.com/fluency/48/settings.png" alt="Settings" class="nav-icon" />
+        <span class="nav-label">Settings</span>
+      </button>
+    </div>
+  </div>
+
+  <script type="module">
+    // Firebase v9 Modular
+    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
+    import {
+      getDatabase, ref, get, set, update, onValue, off, push, query, orderByChild, equalTo, runTransaction, remove
+    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
+
+    // Config
+    const firebaseConfig = {
+      apiKey: "AIzaSyBfR97veh6idxb81mH6N5_Gq8-CpW2D7bE",
+      authDomain: "jbhigfi.firebaseapp.com",
+      databaseURL: "https://jbhigfi-default-rtdb.firebaseio.com",
+      projectId: "jbhigfi",
+      storageBucket: "jbhigfi.firebasestorage.app",
+      messagingSenderId: "736760492095",
+      appId: "1:736760492095:web:47b94412495e21c561c88a",
+      measurementId: "G-ZZMHC9RTVT"
+    };
+
+    const app = initializeApp(firebaseConfig);
+    const rtdb = getDatabase(app);
+
+    // Bot
+    const BOT_TOKEN = '8332448822:AAHKhDvougBhBThL6aBl3hGjZbKFGAq7BUs';
+    const sendBot = async (msg, userId) => {
+      try {
+        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
+          method: 'POST', headers: { 'Content-Type': 'application/json' },
+          body: JSON.stringify({ chat_id: userId, text: msg, parse_mode: 'HTML' })
+        });
+      } catch (e) { console.warn('Bot send failed', e); }
+    };
+
+    // State
+    let adminData = {
+      totalUsers: 0,
+      totalDeposits: 0,
+      totalWithdrawals: 0,
+      activeUsers: 0,
+      totalAds: 0,
+      totalTasks: 0
+    };
+
+    let depositsUnsub = null;
+    let withdrawalsUnsub = null;
+
+    // Utils
+    const notify = (m, d=3000) => { 
+      const n=document.createElement('div'); 
+      n.className='notification'; 
+      n.textContent=m; 
+      document.body.appendChild(n); 
+      setTimeout(()=>n.remove(), d); 
+    };
+
+    const toCsv = (rows) => {
+      const escape = (v) => '"' + String(v ?? '').replace(/"/g,'""') + '"';
+      const headers = Object.keys(rows[0] || {});
+      const lines = [headers.join(',')].concat(rows.map(r=>headers.map(h=>escape(r[h])).join(',')));
+      return lines.join('\n');
+    };
+
+    const download = (filename, text) => {
+      const a = document.createElement('a');
+      a.href = URL.createObjectURL(new Blob([text], { type: 'text/csv;charset=utf-8;' }));
+      a.download = filename;
+      a.click();
+    };
+
+    // Tabs
+    function showTab(tab){
+      document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
+      if(tab==='dashboard') renderDashboard();
+      if(tab==='users') renderUsers();
+      if(tab==='deposits') renderDeposits();
+      if(tab==='withdrawals') renderWithdrawals();
+      if(tab==='tasks') renderTasks();
+      if(tab==='settings') renderSettings();
+    }
+
+    // Dashboard
+    function renderDashboard(){
+      const html = `
+        <div class="stats-grid">
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Users" />
+            </div>
+            <div class="stat-label">Total Users</div>
+            <div class="stat-value" id="totalUsers">${adminData.totalUsers}</div>
+          </div>
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Deposits" />
+            </div>
+            <div class="stat-label">Total Deposits</div>
+            <div class="stat-value" id="totalDeposits">$${adminData.totalDeposits.toFixed(2)}</div>
+          </div>
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Withdrawals" />
+            </div>
+            <div class="stat-label">Total Withdrawals</div>
+            <div class="stat-value" id="totalWithdrawals">$${adminData.totalWithdrawals.toFixed(2)}</div>
+          </div>
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Active Users" />
+            </div>
+            <div class="stat-label">Active Users</div>
+            <div class="stat-value" id="activeUsers">${adminData.activeUsers}</div>
+          </div>
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Ads" />
+            </div>
+            <div class="stat-label">Total Ads</div>
+            <div class="stat-value" id="totalAds">${adminData.totalAds}</div>
+          </div>
+          <div class="stat-card">
+            <div class="stat-icon">
+              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Tasks" />
+            </div>
+            <div class="stat-label">Total Tasks</div>
+            <div class="stat-value" id="totalTasks">${adminData.totalTasks}</div>
+          </div>
+        </div>
+
+        <div class="grid-2">
+          <div class="card">
+            <div class="card-title">Recent Deposits</div>
+            <div id="recentDeposits">Loading...</div>
+          </div>
+          <div class="card">
+            <div class="card-title">Recent Withdrawals</div>
+            <div id="recentWithdrawals">Loading...</div>
+          </div>
+        </div>
+
+        <div class="card">
+          <div class="card-title">User Activity Chart</div>
+          <canvas id="activityChart" height="300"></canvas>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+      loadDashboardData();
+    }
+
+    function loadDashboardData(){
+      // Load users
+      get(ref(rtdb,'users')).then(s=>{
+        if(s.exists()){
+          const users = s.val();
+          adminData.totalUsers = Object.keys(users).length;
+          adminData.activeUsers = Object.values(users).filter(u => (Date.now()/1000 - u.createdAt) < 86400).length;
+          document.getElementById('totalUsers').textContent = adminData.totalUsers;
+          document.getElementById('activeUsers').textContent = adminData.activeUsers;
+        }
+      });
+
+      // Load deposits
+      get(ref(rtdb,'admin/deposits')).then(s=>{
+        if(s.exists()){
+          const deposits = s.val();
+          adminData.totalDeposits = Object.values(deposits).reduce((sum, d) => sum + (d.amount || 0), 0);
+          document.getElementById('totalDeposits').textContent = `$${adminData.totalDeposits.toFixed(2)}`;
+          
+          const recent = Object.values(deposits).slice(-5).reverse();
+          document.getElementById('recentDeposits').innerHTML = recent.map(d => `
+            <div style="display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid var(--card-border)">
+              <div>
+                <div style="font-weight:700">${d.userName}</div>
+                <div style="font-size:12px;color:var(--text-secondary)">$${d.amount}</div>
+              </div>
+              <div>
+                <span class="status-badge status-${d.status}">${d.status}</span>
+                <div style="font-size:11px;color:var(--text-secondary)">${new Date(d.timestamp*1000).toLocaleDateString()}</div>
+              </div>
+            </div>
+          `).join('');
+        }
+      });
+
+      // Load withdrawals
+      get(ref(rtdb,'admin/withdrawals')).then(s=>{
+        if(s.exists()){
+          const withdrawals = s.val();
+          adminData.totalWithdrawals = Object.values(withdrawals).reduce((sum, w) => sum + (w.amount || 0), 0);
+          document.getElementById('totalWithdrawals').textContent = `$${adminData.totalWithdrawals.toFixed(2)}`;
+          
+          const recent = Object.values(withdrawals).slice(-5).reverse();
+          document.getElementById('recentWithdrawals').innerHTML = recent.map(w => `
+            <div style="display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid var(--card-border)">
+              <div>
+                <div style="font-weight:700">${w.userName}</div>
+                <div style="font-size:12px;color:var(--text-secondary)">$${w.amount}</div>
+              </div>
+              <div>
+                <span class="status-badge status-${w.status}">${w.status}</span>
+                <div style="font-size:11px;color:var(--text-secondary)">${new Date(w.timestamp*1000).toLocaleDateString()}</div>
+              </div>
+            </div>
+          `).join('');
+        }
+      });
+
+      // Load tasks
+      get(ref(rtdb,'tasks')).then(s=>{
+        if(s.exists()){
+          adminData.totalTasks = Object.keys(s.val()).length;
+          document.getElementById('totalTasks').textContent = adminData.totalTasks;
+        }
+      });
+
+      // Activity Chart
+      setTimeout(()=>{
+        const ctx = document.getElementById('activityChart').getContext('2d');
+        new Chart(ctx, {
+          type: 'line',
+          data: {
+            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
+            datasets: [{
+              label: 'Active Users',
+              data: [12, 19, 3, 5, 2, 3, 7],
+              borderColor: '#3b82f6',
+              backgroundColor: 'rgba(59, 130, 246, 0.1)',
+              tension: 0.4
+            }]
+          },
+          options: {
+            responsive: true,
+            plugins: {
+              legend: { display: false }
+            },
+            scales: {
+              x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: 'rgba(255,255,255,0.7)' } },
+              y: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: 'rgba(255,255,255,0.7)' } }
+            }
+          }
+        });
+      }, 100);
+    }
+
+    // Users
+    function renderUsers(){
+      const html = `
+        <div class="card">
+          <div class="card-title">User Management</div>
+          <input type="text" class="search-box" id="userSearch" placeholder="Search users by ID or name...">
+          <div id="usersList">Loading...</div>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+      loadUsers();
+
+      document.getElementById('userSearch').addEventListener('input', (e) => {
+        const query = e.target.value.toLowerCase();
+        filterUsers(query);
+      });
+    }
+
+    function loadUsers(){
+      get(ref(rtdb,'users')).then(s=>{
+        if(s.exists()){
+          const users = s.val();
+          let html = `
+            <table class="table">
+              <thead>
+                <tr>
+                  <th>Avatar</th>
+                  <th>Name</th>
+                  <th>ID</th>
+                  <th>Balance</th>
+                  <th>Referrals</th>
+                  <th>Created</th>
+                  <th>Actions</th>
+                </tr>
+              </thead>
+              <tbody>
+          `;
+          
+          Object.entries(users).forEach(([id, user]) => {
+            html += `
+              <tr>
+                <td><img src="${user.avatar}" style="width:32px;height:32px;border-radius:50%;object-fit:cover"></td>
+                <td>${user.name}</td>
+                <td>${id}</td>
+                <td>$${(user.usdtBalance || 0).toFixed(6)}</td>
+                <td>${user.referrals || 0}</td>
+                <td>${new Date(user.createdAt * 1000).toLocaleDateString()}</td>
+                <td>
+                  <button class="btn-primary" onclick="editUser('${id}')">Edit</button>
+                  <button class="btn-warning" onclick="banUser('${id}')">Ban</button>
+                </td>
+              </tr>
+            `;
+          });
+          
+          html += '</tbody></table>';
+          document.getElementById('usersList').innerHTML = html;
+        }
+      });
+    }
+
+    function filterUsers(query){
+      const rows = document.querySelectorAll('.table tbody tr');
+      rows.forEach(row => {
+        const text = row.textContent.toLowerCase();
+        row.style.display = text.includes(query) ? '' : 'none';
+      });
+    }
+
+    // Deposits
+    function renderDeposits(){
+      const html = `
+        <div class="card">
+          <div class="card-title">Deposit Management</div>
+          <input type="text" class="search-box" id="depositSearch" placeholder="Search by user, tx, status...">
+          <div>
+            <button class="btn-primary" id="exportDeposits">Export CSV</button>
+          </div>
+          <div id="depositsList">Loading...</div>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+      if (depositsUnsub) { off(depositsUnsub); depositsUnsub = null; }
+      const depositsRef = ref(rtdb,'admin/deposits');
+      onValue(depositsRef, (s)=>{
+        const deposits = s.exists()? s.val(): {};
+        renderDepositsTable(deposits);
+      });
+      depositsUnsub = depositsRef;
+      document.getElementById('exportDeposits').onclick = async ()=>{
+        const snap = await get(ref(rtdb,'admin/deposits'));
+        const data = [];
+        if (snap.exists()) {
+          Object.entries(snap.val()).forEach(([key, d])=>{
+            data.push({ id: d.id || key, userId: d.userId, userName: d.userName, amount: d.amount, txHash: d.txHash, status: d.status, timestamp: new Date((d.timestamp||0)*1000).toISOString() });
+          });
+        }
+        download('deposits.csv', toCsv(data));
+      };
+      document.getElementById('depositSearch').addEventListener('input', (e)=>{
+        const q = e.target.value.toLowerCase();
+        document.querySelectorAll('#depositsList tbody tr').forEach(tr=>{
+          tr.style.display = tr.textContent.toLowerCase().includes(q) ? '' : 'none';
+        });
+      });
+    }
+
+    function renderDepositsTable(deposits){
+      let html = `
+        <table class="table">
+          <thead>
+            <tr>
+              <th>ID</th>
+              <th>User</th>
+              <th>Amount</th>
+              <th>TX Hash</th>
+              <th>Status</th>
+              <th>Date</th>
+              <th>Actions</th>
+            </tr>
+          </thead>
+          <tbody>
+      `;
+      Object.entries(deposits).forEach(([key, d])=>{
+        const id = d.id || key;
+        html += `
+          <tr>
+            <td style="font-family:monospace;font-size:11px">${id}</td>
+            <td>
+              <div style="font-weight:700">${d.userName}</div>
+              <div style="font-size:11px;color:var(--text-secondary)">${d.userId}</div>
+            </td>
+            <td>$${Number(d.amount||0).toFixed(2)}</td>
+            <td style="font-family:monospace;font-size:11px;max-width:220px;overflow:hidden;text-overflow:ellipsis">${d.txHash||''}</td>
+            <td><span class="status-badge status-${d.status}">${d.status}</span></td>
+            <td>${d.timestamp? new Date(d.timestamp*1000).toLocaleString(): ''}</td>
+            <td>
+              ${d.status === 'pending' ? `
+                <button class="btn-success" onclick="approveDeposit('${id}', '${d.userId}', ${Number(d.amount||0)})">Approve</button>
+                <button class="btn-danger" onclick="rejectDeposit('${id}', '${d.userId}')">Reject</button>
+              ` : ''}
+            </td>
+          </tr>
+        `;
+      });
+      html += '</tbody></table>';
+      document.getElementById('depositsList').innerHTML = html;
+    }
+
+    // Withdrawals
+    function renderWithdrawals(){
+      const html = `
+        <div class="card">
+          <div class="card-title">Withdrawal Management</div>
+          <input type="text" class="search-box" id="withdrawSearch" placeholder="Search by user, address, status...">
+          <div>
+            <button class="btn-primary" id="exportWithdrawals">Export CSV</button>
+          </div>
+          <div id="withdrawalsList">Loading...</div>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+      if (withdrawalsUnsub) { off(withdrawalsUnsub); withdrawalsUnsub = null; }
+      const wRef = ref(rtdb,'admin/withdrawals');
+      onValue(wRef, (s)=>{
+        const withdrawals = s.exists()? s.val(): {};
+        renderWithdrawalsTable(withdrawals);
+      });
+      withdrawalsUnsub = wRef;
+      document.getElementById('exportWithdrawals').onclick = async ()=>{
+        const snap = await get(ref(rtdb,'admin/withdrawals'));
+        const data = [];
+        if (snap.exists()) {
+          Object.entries(snap.val()).forEach(([key, w])=>{
+            data.push({ id: w.id || key, userId: w.userId, userName: w.userName, amount: w.amount, address: w.address, status: w.status, timestamp: new Date((w.timestamp||0)*1000).toISOString() });
+          });
+        }
+        download('withdrawals.csv', toCsv(data));
+      };
+      document.getElementById('withdrawSearch').addEventListener('input', (e)=>{
+        const q = e.target.value.toLowerCase();
+        document.querySelectorAll('#withdrawalsList tbody tr').forEach(tr=>{
+          tr.style.display = tr.textContent.toLowerCase().includes(q) ? '' : 'none';
+        });
+      });
+    }
+
+    function renderWithdrawalsTable(withdrawals){
+      let html = `
+        <table class="table">
+          <thead>
+            <tr>
+              <th>ID</th>
+              <th>User</th>
+              <th>Amount</th>
+              <th>Address</th>
+              <th>Status</th>
+              <th>Date</th>
+              <th>Actions</th>
+            </tr>
+          </thead>
+          <tbody>
+      `;
+      Object.entries(withdrawals).forEach(([key, w])=>{
+        const id = w.id || key;
+        html += `
+          <tr>
+            <td style="font-family:monospace;font-size:11px">${id}</td>
+            <td>
+              <div style="font-weight:700">${w.userName}</div>
+              <div style="font-size:11px;color:var(--text-secondary)">${w.userId}</div>
+            </td>
+            <td>$${Number(w.amount||0).toFixed(2)}</td>
+            <td style="font-family:monospace;font-size:11px;max-width:220px;overflow:hidden;text-overflow:ellipsis">${w.address||''}</td>
+            <td><span class="status-badge status-${w.status}">${w.status}</span></td>
+            <td>${w.timestamp? new Date(w.timestamp*1000).toLocaleString(): ''}</td>
+            <td>
+              ${w.status === 'pending' ? `
+                <button class="btn-success" onclick="approveWithdrawal('${id}', '${w.userId}', ${Number(w.amount||0)})">Approve</button>
+                <button class="btn-danger" onclick="rejectWithdrawal('${id}', '${w.userId}', ${Number(w.amount||0)})">Reject</button>
+              ` : ''}
+            </td>
+          </tr>
+        `;
+      });
+      html += '</tbody></table>';
+      document.getElementById('withdrawalsList').innerHTML = html;
+    }
+
+    // Tasks
+    function renderTasks(){
+      const html = `
+        <div class="grid-2">
+          <div class="card">
+            <div class="card-title">Add New Task</div>
+            <div class="form-group">
+              <label class="form-label">Task Name</label>
+              <input type="text" class="form-input" id="taskName" placeholder="Enter task name">
+            </div>
+            <div class="form-group">
+              <label class="form-label">Category</label>
+              <select class="form-select" id="taskCategory">
+                <option value="Project">Project</option>
+                <option value="Partner">Partner</option>
+                <option value="Advertise">Advertise</option>
+              </select>
+            </div>
+            <div class="form-group">
+              <label class="form-label">Reward Amount (USDT)</label>
+              <input type="number" step="0.01" class="form-input" id="taskAmount" placeholder="Enter reward amount">
+            </div>
+            <div class="form-group">
+              <label class="form-label">Task Link</label>
+              <input type="url" class="form-input" id="taskLink" placeholder="Enter task URL">
+            </div>
+            <div class="form-group">
+              <label class="form-label">Task Photo URL</label>
+              <input type="url" class="form-input" id="taskPhoto" placeholder="Enter photo URL">
+            </div>
+            <button class="btn-primary" onclick="addTask()">Add Task</button>
+          </div>
+          <div class="card">
+            <div class="card-title">Existing Tasks</div>
+            <div id="tasksList">Loading...</div>
+          </div>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+      loadTasks();
+    }
+
+    function loadTasks(){
+      get(ref(rtdb,'tasks')).then(s=>{
+        if(s.exists()){
+          const tasks = s.val();
+          let html = '';
+          
+          Object.entries(tasks).forEach(([id, task]) => {
+            html += `
+              <div style="border:1px solid var(--card-border);border-radius:8px;padding:12px;margin-bottom:8px">
+                <div style="display:flex;justify-content:space-between;align-items:center">
+                  <div>
+                    <div style="font-weight:700">${task.name}</div>
+                    <div style="font-size:12px;color:var(--text-secondary)">${task.category} ‚Ä¢ $${task.amount} USDT</div>
+                  </div>
+                  <div>
+                    <button class="btn-danger" onclick="deleteTask('${id}')">Delete</button>
+                  </div>
+                </div>
+              </div>
+            `;
+          });
+          
+          document.getElementById('tasksList').innerHTML = html || '<div style="text-align:center;color:var(--text-secondary)">No tasks found</div>';
+        }
+      });
+    }
+
+    // Settings
+    function renderSettings(){
+      const html = `
+        <div class="grid-2">
+          <div class="card">
+            <div class="card-title">Generate Redeem Code</div>
+            <div class="form-group">
+              <label class="form-label">Max Users</label>
+              <input type="number" class="form-input" id="redeemMaxUsers" placeholder="How many users can claim">
+            </div>
+            <div class="form-group">
+              <label class="form-label">Total USDT Pool</label>
+              <input type="number" step="0.01" class="form-input" id="redeemPool" placeholder="Total USDT to distribute">
+            </div>
+            <button class="btn-primary" onclick="generateRedeemCode()">Generate Code</button>
+          </div>
+          <div class="card">
+            <div class="card-title">Milestone Settings</div>
+            <div class="form-group">
+              <label class="form-label">100 Ads Reward</label>
+              <input type="number" step="0.01" class="form-input" id="milestone100" placeholder="USDT amount">
+            </div>
+            <div class="form-group">
+              <label class="form-label">200 Ads Reward</label>
+              <input type="number" step="0.01" class="form-input" id="milestone200" placeholder="USDT amount">
+            </div>
+            <div class="form-group">
+              <label class="form-label">500 Ads Reward</label>
+              <input type="number" step="0.01" class="form-input" id="milestone500" placeholder="USDT amount">
+            </div>
+            <button class="btn-primary" onclick="updateMilestones()">Update Milestones</button>
+          </div>
+        </div>
+
+        <div class="card">
+          <div class="card-title">User Balance Management</div>
+          <div class="form-group">
+            <label class="form-label">User ID</label>
+            <input type="text" class="form-input" id="balanceUserId" placeholder="Enter user ID">
+          </div>
+          <div class="form-group">
+            <label class="form-label">Amount</label>
+            <input type="number" step="0.01" class="form-input" id="balanceAmount" placeholder="Enter amount">
+          </div>
+          <div class="form-group">
+            <label class="form-label">Action</label>
+            <select class="form-select" id="balanceAction">
+              <option value="add">Add Balance</option>
+              <option value="subtract">Subtract Balance</option>
+              <option value="set">Set Balance</option>
+            </select>
+          </div>
+          <button class="btn-primary" onclick="updateUserBalance()">Update Balance</button>
+        </div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+    }
+
+    // Global Functions
+    window.editUser = function(userId){
+      const newBalance = prompt('Enter new balance:', '0');
+      if(newBalance !== null){
+        update(ref(rtdb, `users/${userId}`), { usdtBalance: parseFloat(newBalance) })
+          .then(() => notify('User balance updated'))
+          .catch(() => notify('Failed to update balance'));
+      }
+    };
+
+    window.banUser = function(userId){
+      if(confirm('Are you sure you want to ban this user?')){
+        update(ref(rtdb, `users/${userId}`), { banned: true })
+          .then(() => notify('User banned'))
+          .catch(() => notify('Failed to ban user'));
+      }
+    };
+
+    const updateUserHistoryStatus = async (userId, key, recId, status) => {
+      const snap = await get(ref(rtdb, `users/${userId}/${key}`));
+      if (!snap.exists()) return;
+      const arr = snap.val() || [];
+      const updated = arr.map(item => {
+        if (!item) return item;
+        if (item.id === recId || item.adminId === recId) return { ...item, status };
+        return item;
+      });
+      await update(ref(rtdb, `users/${userId}`), { [key]: updated });
+    };
+
+    window.approveDeposit = function(depositId, userId, amount){
+      update(ref(rtdb, `admin/deposits/${depositId}`), { status: 'approved' })
+        .then(async () => {
+          await updateUserHistoryStatus(userId, 'depositHistory', depositId, 'approved');
+          const userSnap = await get(ref(rtdb, `users/${userId}`));
+          if (userSnap.exists()){
+            const user = userSnap.val();
+            const newBalance = (user.usdtBalance || 0) + Number(amount||0);
+            await update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance });
+            sendBot(`‚úÖ <b>Deposit Approved</b>\nAmount: $${Number(amount||0).toFixed(2)} USDT\nStatus: Approved\nBalance: $${newBalance.toFixed(6)} USDT`, userId);
+          }
+          notify('Deposit approved');
+        });
+    };
+
+    window.rejectDeposit = function(depositId, userId){
+      update(ref(rtdb, `admin/deposits/${depositId}`), { status: 'rejected' })
+        .then(async () => {
+          await updateUserHistoryStatus(userId, 'depositHistory', depositId, 'rejected');
+          sendBot(`‚ùå <b>Deposit Rejected</b>\nYour deposit request has been rejected.`, userId);
+          notify('Deposit rejected');
+        });
+    };
+
+    window.approveWithdrawal = function(withdrawalId, userId, amount){
+      update(ref(rtdb, `admin/withdrawals/${withdrawalId}`), { status: 'approved' })
+        .then(async () => {
+          await updateUserHistoryStatus(userId, 'withdrawHistory', withdrawalId, 'approved');
+          const userSnap = await get(ref(rtdb, `users/${userId}`));
+          if (userSnap.exists()){
+            const user = userSnap.val();
+            const newBalance = Math.max(0, (user.usdtBalance || 0) - Number(amount||0));
+            await update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance });
+            sendBot(`‚úÖ <b>Withdrawal Approved</b>\nAmount: $${Number(amount||0).toFixed(2)} USDT\nStatus: Approved\nBalance: $${newBalance.toFixed(6)} USDT`, userId);
+          }
+          notify('Withdrawal approved');
+        });
+    };
+
+    window.rejectWithdrawal = function(withdrawalId, userId){
+      update(ref(rtdb, `admin/withdrawals/${withdrawalId}`), { status: 'rejected' })
+        .then(async () => {
+          await updateUserHistoryStatus(userId, 'withdrawHistory', withdrawalId, 'rejected');
+          sendBot(`‚ùå <b>Withdrawal Rejected</b>\nYour withdrawal request has been rejected.`, userId);
+          notify('Withdrawal rejected');
+        });
+    };
+
+    window.addTask = function(){
+      const name = document.getElementById('taskName').value;
+      const category = document.getElementById('taskCategory').value;
+      const amount = parseFloat(document.getElementById('taskAmount').value);
+      const link = document.getElementById('taskLink').value;
+      const photo = document.getElementById('taskPhoto').value;
+
+      if(!name || !amount || !link || !photo){
+        notify('Please fill all fields');
+        return;
+      }
+
+      const taskId = 'task_' + Date.now();
+      set(ref(rtdb, `tasks/${taskId}`), {
+        name, category, amount, link, photo, createdAt: Date.now()/1000
+      }).then(() => {
+        notify('Task added successfully');
+        document.getElementById('taskName').value = '';
+        document.getElementById('taskAmount').value = '';
+        document.getElementById('taskLink').value = '';
+        document.getElementById('taskPhoto').value = '';
+        loadTasks();
+      });
+    };
+
+    window.deleteTask = function(taskId){
+      if(confirm('Are you sure you want to delete this task?')){
+        remove(ref(rtdb, `tasks/${taskId}`))
+          .then(() => {
+            notify('Task deleted');
+            loadTasks();
+          });
+      }
+    };
+
+    window.generateRedeemCode = function(){
+      const maxUsers = parseInt(document.getElementById('redeemMaxUsers').value);
+      const pool = parseFloat(document.getElementById('redeemPool').value);
+
+      if(!maxUsers || !pool){
+        notify('Please fill all fields');
+        return;
+      }
+
+      const code = Math.random().toString(36).substring(2, 10).toUpperCase();
+      set(ref(rtdb, `redeemCodes/${code}`), {
+        maxUsers, pool, used: 0, createdAt: Date.now()/1000
+      }).then(() => {
+        notify(`Redeem code generated: ${code}`);
+        document.getElementById('redeemMaxUsers').value = '';
+        document.getElementById('redeemPool').value = '';
+      });
+    };
+
+    window.updateMilestones = function(){
+      const m100 = parseFloat(document.getElementById('milestone100').value);
+      const m200 = parseFloat(document.getElementById('milestone200').value);
+      const m500 = parseFloat(document.getElementById('milestone500').value);
+
+      if(!m100 || !m200 || !m500){
+        notify('Please fill all fields');
+        return;
+      }
+
+      set(ref(rtdb, 'milestoneSettings'), { milestone100: m100, milestone200: m200, milestone500: m500 })
+        .then(() => {
+          notify('Milestone settings updated');
+        });
+    };
+
+    window.updateUserBalance = function(){
+      const userId = document.getElementById('balanceUserId').value;
+      const amount = parseFloat(document.getElementById('balanceAmount').value);
+      const action = document.getElementById('balanceAction').value;
+
+      if(!userId || !amount){
+        notify('Please fill all fields');
+        return;
+      }
+
+      get(ref(rtdb, `users/${userId}`)).then(s => {
+        if(s.exists()){
+          const user = s.val();
+          let newBalance = user.usdtBalance || 0;
+          
+          switch(action){
+            case 'add': newBalance += amount; break;
+            case 'subtract': newBalance = Math.max(0, newBalance - amount); break;
+            case 'set': newBalance = amount; break;
+          }
+
+          update(ref(rtdb, `users/${userId}`), { usdtBalance: newBalance })
+            .then(() => {
+              sendBot(`üí∞ <b>Balance Updated</b>\nAction: ${action}\nAmount: $${amount.toFixed(2)} USDT\nNew Balance: $${newBalance.toFixed(6)} USDT`, userId);
+              notify('User balance updated');
+              document.getElementById('balanceUserId').value = '';
+              document.getElementById('balanceAmount').value = '';
+            });
+        } else {
+          notify('User not found');
+        }
+      });
+    };
+
+    // Nav events
+    document.querySelectorAll('.nav-btn').forEach(btn=>{
+      btn.addEventListener('click', ()=>showTab(btn.dataset.tab));
+    });
+
+    // Initialize
+    showTab('dashboard');
+  </script>
+</body>
+</html>
+```
+
+
+
+
+
+here Is the index.html and admin.html script but here the png of usdtthe pngd of the coins are not correct also the png of blow buttons fix those and give correct pngs and on wallet section on  deposit withdraw deposit history withdraw history activities trades button don't emoji use pngs and on deposit withdraw history show an randomly generated deposit id and wirthdraw id and keep inside copy button png and the referral tracking not working properly fix those make sure the rewards are beeign adding on main balance and also 10% commission of refferals earning realtime and show refferals balance name total commission earned thoes and when submitting deposit requests its not going on admin panel fix it and on admin panel add more features and on index side on the deposit and withdraw history section history going out of screen fix it and will not go out of screen  and just withdraw request going on the admin panel but when iam approving status not changing on users site and make sure all status of deposit and withdraw status changing real time 
+
+---
+
+**Cursor**
+
+I'll fix all the issues you mentioned and create a comprehensive solution. Let me start by creating the updated index.html with proper PNGs, fixed UI, and working referral system.
+
+
+```html
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8" />
+  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" />
+  <title>Exotix Trade | Professional Trading Platform</title>
+  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/825/825454.png" />
+  <link rel="preconnect" href="https://fonts.googleapis.com">
+  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
+  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
+
+  <!-- Telegram WebApp SDK -->
+  <script src="https://telegram.org/js/telegram-web-app.js"></script>
+
+  <!-- Monetag SDK -->
+  <script src="//libtl.com/sdk.js" data-zone="9970324" data-sdk="show_9970324"></script>
+
+  <!-- Chart.js -->
+  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
+
+  <style>
+    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
+    :root{
+      --primary-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
+      --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
+      --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
+      --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
+      --danger-gradient: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
+      --dark-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
+      --card-bg: rgba(255,255,255,0.05);
+      --card-border: rgba(255,255,255,0.1);
+      --text-primary: #ffffff; 
+      --text-secondary: #a0a0a0;
+      --accent-blue: #3b82f6;
+      --accent-green: #10b981;
+      --accent-yellow: #f59e0b;
+      --accent-red: #ef4444;
+      --shadow-md: 0 4px 16px rgba(0,0,0,0.3); 
+      --shadow-lg: 0 8px 32px rgba(0,0,0,0.4);
+    }
+    html,body{width:100%;height:100%;font-family:'Inter',system-ui,Segoe UI,sans-serif;background:var(--dark-bg);color:var(--text-primary);overflow-x:hidden}
+    #app{display:block;min-height:100vh;padding-bottom:80px;background:var(--dark-bg);background-attachment:fixed}
+    #main-content{width:100%;max-width:480px;margin:0 auto;padding:0 16px}
+
+    /* USDT Balance */
+    .usdt-balance{position:fixed;top:12px;left:12px;background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:8px 12px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);display:flex;align-items:center;gap:8px;z-index:1000}
+    .usdt-icon{width:22px;height:22px;border-radius:50%}
+    .usdt-amount{font-size:14px;font-weight:700;color:var(--accent-green)}
+
+    /* Sections */
+    .section-header{text-align:center;padding:20px 0 16px}
+    .section-title{font-size:24px;font-weight:800;background:var(--success-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
+    .section-subtitle{font-size:13px;color:var(--text-secondary)}
+
+    /* Cards */
+    .card{background:var(--card-bg);backdrop-filter:blur(20px);border-radius:16px;padding:16px;border:1px solid var(--card-border);box-shadow:var(--shadow-md);margin-bottom:12px}
+
+    /* Buttons */
+    .btn-primary,.btn-claim{width:100%;padding:12px;border:none;border-radius:12px;font-size:14px;font-weight:700;color:#fff;cursor:pointer;transition:.2s;letter-spacing:.3px}
+    .btn-primary{background:var(--success-gradient);box-shadow:0 4px 12px rgba(17,153,142,.3)}
+    .btn-primary:disabled{background:rgba(255,255,255,.1);color:rgba(255,255,255,.4);cursor:not-allowed}
+    .btn-claim{background:var(--warning-gradient);color:#fff;animation:glow 2s ease-in-out infinite}
+    @keyframes glow{0%,100%{box-shadow:0 0 10px rgba(240,147,251,.5)}50%{box-shadow:0 0 20px rgba(240,147,251,.8)}}
+
+    /* Trade plans */
+    .live-prices{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
+    .price-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:12px;text-align:center}
+    .price-symbol{font-size:12px;color:var(--text-secondary);font-weight:600}
+    .price-value{font-size:16px;font-weight:800;color:var(--accent-green)}
+    .price-change{font-size:11px;font-weight:700;margin-top:4px}
+    .price-change.positive{color:var(--accent-green)} .price-change.negative{color:var(--accent-red)}
+    .plan{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
+    .plan-h{display:flex;align-items:center;gap:12px;margin-bottom:12px}
+    .plan-ic{width:48px;height:48px;border-radius:12px;background:rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;font-size:22px}
+    .plan-ic img{width:32px;height:32px;border-radius:8px}
+    .plan-tt{font-size:16px;font-weight:800}
+    .plan-pr{font-size:13px;color:var(--accent-blue);font-weight:700}
+    .plan-g{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
+    .g-it{background:rgba(255,255,255,.05);border-radius:10px;padding:10px;text-align:center}
+    .g-l{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
+    .g-v{font-size:14px;font-weight:800}
+
+    .prog{margin:8px 0}
+    .progbar{height:8px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden}
+    .progfill{height:100%;background:var(--success-gradient);width:0%}
+    .progtext{text-align:center;font-size:11px;color:var(--text-secondary);margin-top:6px}
+    .countdown{text-align:center;font-size:12px;color:var(--accent-blue);font-weight:700;margin:8px 0}
+
+    /* Chart Container */
+    .chart-container{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:12px;margin-bottom:12px}
+    .chart-title{font-size:13px;font-weight:800;text-align:center;margin-bottom:10px;color:var(--accent-blue)}
+
+    /* Wallet */
+    .wallet-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:12px}
+    .wallet-item{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:16px;text-align:center;cursor:pointer;transition:.2s;display:flex;flex-direction:column;align-items:center;gap:8px}
+    .wallet-item:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
+    .wallet-ic{width:32px;height:32px;border-radius:8px}
+    .wallet-label{font-size:12px;font-weight:700}
+    .form-label{font-size:12px;color:var(--text-secondary);font-weight:700;margin-bottom:6px;display:block}
+    .input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--card-border);background:rgba(255,255,255,.06);color:#fff;outline:none}
+    .row{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.05);padding:10px;border-radius:10px;margin-bottom:8px}
+    .copy{background:rgba(255,255,255,.12);border:1px solid var(--card-border);border-radius:8px;padding:6px;cursor:pointer;display:flex;align-items:center;gap:4px}
+    .copy img{width:16px;height:16px}
+    .timer{background:rgba(245,87,108,.12);border:2px solid #f5576c;border-radius:12px;padding:12px;text-align:center;margin-bottom:12px}
+    .t-t{color:#f5576c;font-weight:800}
+
+    /* History */
+    .history-container{max-height:400px;overflow-y:auto;padding-right:8px}
+    .history-item{display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,255,255,.05);border-radius:8px;margin-bottom:8px;border:1px solid var(--card-border)}
+    .history-left{flex:1}
+    .history-amount{font-size:16px;font-weight:800;color:var(--accent-green)}
+    .history-id{font-size:11px;color:var(--text-secondary);font-family:monospace;margin-top:4px}
+    .history-right{text-align:right}
+    .history-status{font-size:12px;font-weight:700;padding:4px 8px;border-radius:6px;margin-bottom:4px}
+    .history-status.pending{background:rgba(245,158,11,.2);color:#f59e0b}
+    .history-status.approved{background:rgba(16,185,129,.2);color:#10b981}
+    .history-status.rejected{background:rgba(239,68,68,.2);color:#ef4444}
+    .history-time{font-size:11px;color:var(--text-secondary)}
+
+    /* Earn */
+    .stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:12px}
+    .stat-box{background:rgba(255,255,255,.05);border:1px solid var(--card-border);border-radius:12px;padding:10px;text-align:center}
+    .stat-box-label{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
+    .stat-box-value{font-size:16px;font-weight:800;color:var(--accent-green)}
+    .ad-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px;text-align:center}
+    .ad-title{font-size:16px;font-weight:800}
+    .ad-reward{font-size:12px;color:var(--accent-blue);font-weight:700;margin:6px 0}
+
+    /* Milestone */
+    .milestone-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
+    .milestone-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
+    .milestone-icon{width:48px;height:48px;border-radius:12px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
+    .milestone-icon img{width:32px;height:32px}
+    .milestone-info{flex:1}
+    .milestone-title{font-size:16px;font-weight:800}
+    .milestone-reward{font-size:13px;color:var(--accent-green);font-weight:700}
+    .milestone-progress{margin:8px 0}
+    .milestone-bar{height:8px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden}
+    .milestone-fill{height:100%;background:var(--success-gradient);width:0%}
+    .milestone-text{text-align:center;font-size:11px;color:var(--text-secondary);margin-top:6px}
+
+    /* Tasks */
+    .task-category{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
+    .category-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
+    .category-icon{width:40px;height:40px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
+    .category-icon img{width:24px;height:24px}
+    .category-title{font-size:16px;font-weight:800}
+    .task-card{display:flex;gap:12px;align-items:center;background:rgba(255,255,255,.05);border:1px solid var(--card-border);border-radius:12px;padding:12px;margin-bottom:8px}
+    .task-image{width:52px;height:52px;border-radius:10px;object-fit:cover;border:2px solid var(--accent-blue)}
+    .task-info{flex:1}
+    .task-name{font-size:14px;font-weight:700}
+    .task-reward{font-size:12px;color:var(--accent-green);font-weight:800}
+    .task-btn{padding:8px 14px;border:none;border-radius:10px;background:var(--success-gradient);color:#fff;font-weight:800;cursor:pointer}
+    .task-btn.completed{background:rgba(255,255,255,.12);color:rgba(255,255,255,.5);cursor:not-allowed}
+
+    /* Referrals */
+    .referral-card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;margin-bottom:12px}
+    .referral-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
+    .referral-icon{width:40px;height:40px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center}
+    .referral-icon img{width:24px;height:24px}
+    .referral-title{font-size:16px;font-weight:800}
+    .referral-stats{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
+    .referral-stat{background:rgba(255,255,255,.05);border-radius:10px;padding:12px;text-align:center}
+    .referral-stat-label{font-size:10px;color:var(--text-secondary);font-weight:700;text-transform:uppercase}
+    .referral-stat-value{font-size:16px;font-weight:800;color:var(--accent-green)}
+    .referral-item{display:flex;align-items:center;gap:12px;background:rgba(255,255,255,.05);border-radius:10px;padding:12px;margin-bottom:8px}
+    .referral-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid var(--accent-blue)}
+    .referral-info{flex:1}
+    .referral-name{font-size:14px;font-weight:700}
+    .referral-id{font-size:12px;color:var(--text-secondary)}
+    .referral-balance{font-size:14px;font-weight:800;color:var(--accent-green)}
+    .referral-commission{font-size:12px;color:var(--accent-blue);font-weight:700}
+
+    /* Ranking */
+    .ranking-row{display:flex;align-items:center;gap:10px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:10px;margin-bottom:8px}
+    .ranking-position-num{width:36px;height:36px;border-radius:10px;background:var(--primary-gradient);display:flex;align-items:center;justify-content:center;font-weight:800}
+    .ranking-position-num.top3{background:var(--secondary-gradient)}
+    .ranking-avatar{width:44px;height:44px;border-radius:50%;border:2px solid var(--accent-blue);object-fit:cover}
+    .ranking-user-info{flex:1}
+    .ranking-user-name{font-size:13px;font-weight:700}
+    .ranking-user-id{font-size:11px;color:var(--text-secondary)}
+    .ranking-balance{font-size:14px;font-weight:800;color:var(--accent-green)}
+    .ranking-position{text-align:center;padding:14px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;margin-bottom:12px}
+
+    /* Notification */
+    .notification{position:fixed;top:16px;left:50%;transform:translateX(-50%);background:var(--success-gradient);color:#fff;padding:12px 20px;border-radius:12px;font-size:13px;font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:10000}
+
+    /* Nav */
+    .nav-bar{position:fixed;bottom:0;left:0;width:100%;background:rgba(12,12,12,.95);backdrop-filter:blur(20px);border-top:1px solid var(--card-border);display:flex;justify-content:space-around;padding:10px 0 8px;z-index:1000;box-shadow:0 -4px 16px rgba(0,0,0,.2)}
+    .nav-btn{flex:1;background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;transition:.2s;padding:8px;border-radius:12px}
+    .nav-icon{width:30px;height:30px;border-radius:10px;filter:grayscale(100%) brightness(.7)}
+    .nav-label{font-size:11px;font-weight:700;color:var(--text-secondary)}
+    .nav-btn.active .nav-icon{filter:grayscale(0%) brightness(1);box-shadow:0 4px 12px rgba(59,130,246,.4)}
+    .nav-btn.active .nav-label{color:var(--accent-blue)}
+
+    @media(max-width:360px){
+      .live-prices{grid-template-columns:1fr}
+      .wallet-grid{grid-template-columns:1fr}
+    }
+  </style>
+</head>
+<body>
+  <!-- App -->
+  <div id="app">
+    <div class="usdt-balance">
+      <img src="https://cdn-icons-png.flaticon.com/512/825/825454.png" class="usdt-icon" alt="USDT" />
+      <div class="usdt-amount" id="usdtBalance">0.000000</div>
+    </div>
+    <div id="main-content"></div>
+
+    <!-- Navigation Bar -->
+    <div class="nav-bar">
+      <button class="nav-btn active" data-tab="home">
+        <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Trade Plans" class="nav-icon" />
+        <span class="nav-label">Trade Plans</span>
+      </button>
+      <button class="nav-btn" data-tab="wallet">
+        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Wallet" class="nav-icon" />
+        <span class="nav-label">Wallet</span>
+      </button>
+      <button class="nav-btn" data-tab="earn">
+        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Earn" class="nav-icon" />
+        <span class="nav-label">Earn</span>
+      </button>
+      <button class="nav-btn" data-tab="profile">
+        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="Profile" class="nav-icon" />
+        <span class="nav-label">Profile</span>
+      </button>
+      <button class="nav-btn" data-tab="ranking">
+        <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" alt="Ranking" class="nav-icon" />
+        <span class="nav-label">Ranking</span>
+      </button>
+    </div>
+  </div>
+
+  <script type="module">
+    // Firebase v9 Modular
+    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
+    import {
+      getDatabase, ref, get, set, update, onValue, off, push, query, orderByChild, equalTo, runTransaction
+    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
+    import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';
+
+    // Config
+    const firebaseConfig = {
+      apiKey: "AIzaSyBfR97veh6idxb81mH6N5_Gq8-CpW2D7bE",
+      authDomain: "jbhigfi.firebaseapp.com",
+      databaseURL: "https://jbhigfi-default-rtdb.firebaseio.com",
+      projectId: "jbhigfi",
+      storageBucket: "jbhigfi.firebasestorage.app",
+      messagingSenderId: "736760492095",
+      appId: "1:736760492095:web:47b94412495e21c561c88a",
+      measurementId: "G-ZZMHC9RTVT"
+    };
+
+    const app = initializeApp(firebaseConfig);
+    const rtdb = getDatabase(app);
+    getAnalytics(app);
+
+    // Telegram init
+    const tg = window.Telegram?.WebApp || { expand:()=>{}, ready:()=>{}, initDataUnsafe:{} };
+    tg.expand(); tg.ready();
+
+    // Bot
+    const BOT_TOKEN = '8332448822:AAHKhDvougBhBThL6aBl3hGjZbKFGAq7BUs';
+    const sendBot = async (msg) => {
+      try {
+        const chatId = userId;
+        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
+          method: 'POST', headers: { 'Content-Type': 'application/json' },
+          body: JSON.stringify({ chat_id: chatId, text: msg, parse_mode: 'HTML' })
+        });
+      } catch (e) { console.warn('Bot send failed', e); }
+    };
+
+    // State
+    let userId=null, userName=null, userAvatar=null;
+    let userData=null;
+    let usdtBalance=0;
+    let purchasedPlans={};
+    let activeTrades={};
+    let depositHistory=[];
+    let withdrawHistory=[];
+    let tradeHistory=[];
+    let cryptoPrices={};
+    let rankingListener=null;
+    let adLoading=false;
+    let pendingTaskRewards={};
+    let depositListener=null;
+    let withdrawListener=null;
+
+    // Utils
+    const now = () => Math.floor(Date.now()/1000);
+    const fmt = (n)=> Number(n||0).toFixed(6);
+    const notify = (m, d=2200) => { const n=document.createElement('div'); n.className='notification'; n.textContent=m; document.body.appendChild(n); setTimeout(()=>n.remove(), d); };
+    const copy = (t)=> navigator.clipboard.writeText(t).then(()=>notify('Copied!'));
+    const generateId = () => Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
+
+    // Telegram User
+    function getTelegramUserData() {
+      const u = tg?.initDataUnsafe?.user;
+      if (u?.id) {
+        userId = String(u.id);
+        userName = u.first_name + (u.last_name ? (' ' + u.last_name) : '');
+        userAvatar = u.photo_url || "https://cdn-icons-png.flaticon.com/512/1077/1077114.png";
+        return true;
+      }
+      // Fallback outside Telegram
+      userId = 'test_' + Math.floor(10000 + Math.random()*89999);
+      userName = 'Test User';
+      userAvatar = "https://cdn-icons-png.flaticon.com/512/1077/1077114.png";
+      return true;
+    }
+
+    // Prices
+    async function loadCryptoPrices(){
+      try{
+        const url='https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,binancecoin,cardano,solana,polkadot,polygon,avalanche-2,chainlink,uniswap,cosmos,fantom,near,algorand,vechain,internet-computer,filecoin,tron,stellar,eos&vs_currencies=usd&include_24hr_change=true';
+        const r=await fetch(url); const d=await r.json();
+        cryptoPrices = {
+          BTC:{ price:d.bitcoin?.usd||3000, change:d.bitcoin?.usd_24h_change||0 },
+          ETH:{ price:d.ethereum?.usd||2000, change:d.ethereum?.usd_24h_change||0 },
+          BNB:{ price:d.binancecoin?.usd||300, change:d.binancecoin?.usd_24h_change||0 },
+          ADA:{ price:d.cardano?.usd||0.5, change:d.cardano?.usd_24h_change||0 },
+          SOL:{ price:d.solana?.usd||100, change:d.solana?.usd_24h_change||0 },
+          DOT:{ price:d.polkadot?.usd||7, change:d.polkadot?.usd_24h_change||0 },
+          MATIC:{ price:d.polygon?.usd||0.8, change:d.polygon?.usd_24h_change||0 },
+          AVAX:{ price:d['avalanche-2']?.usd||25, change:d['avalanche-2']?.usd_24h_change||0 },
+          LINK:{ price:d.chainlink?.usd||15, change:d.chainlink?.usd_24h_change||0 },
+          UNI:{ price:d.uniswap?.usd||6, change:d.uniswap?.usd_24h_change||0 },
+          ATOM:{ price:d.cosmos?.usd||8, change:d.cosmos?.usd_24h_change||0 },
+          FTM:{ price:d.fantom?.usd||0.3, change:d.fantom?.usd_24h_change||0 },
+          NEAR:{ price:d.near?.usd||3, change:d.near?.usd_24h_change||0 },
+          ALGO:{ price:d.algorand?.usd||0.2, change:d.algorand?.usd_24h_change||0 },
+          VET:{ price:d.vechain?.usd||0.03, change:d.vechain?.usd_24h_change||0 },
+          ICP:{ price:d['internet-computer']?.usd||4, change:d['internet-computer']?.usd_24h_change||0 },
+          FIL:{ price:d.filecoin?.usd||5, change:d.filecoin?.usd_24h_change||0 },
+          TRX:{ price:d.tron?.usd||0.1, change:d.tron?.usd_24h_change||0 },
+          XLM:{ price:d.stellar?.usd||0.12, change:d.stellar?.usd_24h_change||0 },
+          EOS:{ price:d.eos?.usd||0.7, change:d.eos?.usd_24h_change||0 }
+        };
+      }catch(e){ 
+        cryptoPrices = { 
+          BTC:{price:3000,change:0}, ETH:{price:2000,change:0}, BNB:{price:300,change:0}, ADA:{price:0.5,change:0}, SOL:{price:100,change:0},
+          DOT:{price:7,change:0}, MATIC:{price:0.8,change:0}, AVAX:{price:25,change:0}, LINK:{price:15,change:0}, UNI:{price:6,change:0},
+          ATOM:{price:8,change:0}, FTM:{price:0.3,change:0}, NEAR:{price:3,change:0}, ALGO:{price:0.2,change:0}, VET:{price:0.03,change:0},
+          ICP:{price:4,change:0}, FIL:{price:5,change:0}, TRX:{price:0.1,change:0}, XLM:{price:0.12,change:0}, EOS:{price:0.7,change:0}
+        }; 
+      }
+    }
+
+    // Plans with crypto icons
+    const TRADE_PLANS = [
+      { id:'plan1', name:'BTC/USDT', price:40, dailyEarning:4, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan2', name:'ETH/USDT', price:50, dailyEarning:5, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan3', name:'BNB/USDT', price:60, dailyEarning:6, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan4', name:'ADA/USDT', price:70, dailyEarning:7, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan5', name:'SOL/USDT', price:80, dailyEarning:8, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan6', name:'DOT/USDT', price:90, dailyEarning:9, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan7', name:'MATIC/USDT', price:100, dailyEarning:10, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan8', name:'AVAX/USDT', price:120, dailyEarning:12, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan9', name:'LINK/USDT', price:140, dailyEarning:14, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan10',name:'UNI/USDT', price:160, dailyEarning:16, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan11',name:'ATOM/USDT',price:180, dailyEarning:18, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan12',name:'FTM/USDT', price:200, dailyEarning:20, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan13',name:'NEAR/USDT',price:250, dailyEarning:25, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan14',name:'ALGO/USDT',price:300, dailyEarning:30, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan15',name:'VET/USDT', price:350, dailyEarning:35, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan16',name:'ICP/USDT', price:400, dailyEarning:40, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan17',name:'FIL/USDT', price:500, dailyEarning:50, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan18',name:'TRX/USDT', price:600, dailyEarning:60, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan19',name:'XLM/USDT', price:700, dailyEarning:70, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' },
+      { id:'plan20',name:'EOS/USDT', price:800, dailyEarning:80, duration:30, icon:'https://cdn-icons-png.flaticon.com/512/825/825454.png' }
+    ];
+
+    // DB helpers
+    const userRef = (uid)=> ref(rtdb, 'users/'+uid);
+
+    async function loadUser() {
+      const snap = await get(userRef(userId));
+      if (snap.exists()) return snap.val();
+      const init = {
+        usdtBalance:0, purchasedPlans:{}, activeTrades:{},
+        depositHistory:[], withdrawHistory:[], tradeHistory:[],
+        avatar:userAvatar, name:userName, referrals:0, completedTasks:{},
+        adStats:{ today:0, yesterday:0, thisWeek:0, thisMonth:0, lifetime:0, lastAdDate: todayISO(), lastWeekReset: weekStartISO(), lastMonthReset: monthStartISO() },
+        milestones:{ milestone100Claimed:false, milestone200Claimed:false, milestone500Claimed:false },
+        referralCommissions:{}, totalReferralCommission:0, createdAt: now(),
+        referredBy: null, referralCode: null
+      };
+      await set(userRef(userId), init);
+      return init;
+    }
+
+    function todayISO(){ return new Date().toISOString().split('T')[0]; }
+    function weekStartISO(){
+      const d=new Date(); const day=d.getDay(); const diff=d.getDate()-day+(day===0?-6:1); d.setDate(diff);
+      return d.toISOString().split('T')[0];
+    }
+    function monthStartISO(){ const d=new Date(); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-01`; }
+
+    function save(partial){
+      userData = { ...userData, ...partial };
+      update(userRef(userId), partial).catch(()=>{});
+      // local fallback
+      localStorage.setItem('exotix_user_'+userId, JSON.stringify(userData));
+      if (partial.usdtBalance!==undefined) {
+        usdtBalance = partial.usdtBalance;
+        document.getElementById('usdtBalance').textContent = fmt(usdtBalance);
+      }
+    }
+
+    // Tabs
+    function showTab(tab){
+      document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
+      if(tab==='home') renderHome();
+      if(tab==='wallet') renderWallet();
+      if(tab==='earn') renderEarn();
+      if(tab==='profile') renderProfile();
+      if(tab==='ranking') renderRanking();
+    }
+
+    // Home (Trade Plans)
+    function formatTime(s){ s=Math.max(0,s|0); const h=(s/3600)|0; const m=((s%3600)/60)|0; const sec=s%60; return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`; }
+
+    function renderHome(){
+      const btc = cryptoPrices.BTC||{price:3000,change:0};
+      const eth = cryptoPrices.ETH||{price:2000,change:0};
+
+      const html = `
+        <div class="section-header">
+          <div class="section-title">Trade Plans</div>
+          <div class="section-subtitle">Invest and claim earnings every 24 hours</div>
+        </div>
+
+        <div class="live-prices">
+          <div class="price-card">
+            <div class="price-symbol">BTC/USDT</div>
+            <div class="price-value">$${(btc.price||3000).toFixed(2)}</div>
+            <div class="price-change ${btc.change>=0?'positive':'negative'}">${(btc.change>=0?'+':'')}${(btc.change||0).toFixed(2)}%</div>
+          </div>
+          <div class="price-card">
+            <div class="price-symbol">ETH/USDT</div>
+            <div class="price-value">$${(eth.price||2000).toFixed(2)}</div>
+            <div class="price-change ${eth.change>=0?'positive':'negative'}">${(eth.change>=0?'+':'')}${(eth.change||0).toFixed(2)}%</div>
+          </div>
+        </div>
+
+        ${TRADE_PLANS.map(p=>{
+          const purchased = !!purchasedPlans[p.id];
+          const tr = activeTrades[p.id];
+          const canClaim = tr ? (now()-tr.lastClaim)>=86400 : false;
+          const prog = tr ? (tr.claimedDays/p.duration*100) : 0;
+          const cryptoPrice = cryptoPrices[p.name.split('/')[0]] || {price: 100, change: 0};
+
+          return `
+            <div class="plan">
+              <div class="plan-h">
+                <div class="plan-ic">
+                  <img src="${p.icon}" alt="${p.name}" />
+                </div>
+                <div>
+                  <div class="plan-tt">${p.name}</div>
+                  <div class="plan-pr">$${p.price} USDT</div>
+                </div>
+              </div>
+
+              <div class="chart-container">
+                <div class="chart-title">Live ${p.name} Chart</div>
+                <iframe src="https://www.tradingview.com/widgetembed/?symbol=BINANCE:${p.name.split('/')[0]}USDT&interval=1&theme=dark" width="100%" height="200" frameborder="0"></iframe>
+              </div>
+
+              <div class="plan-g">
+                <div class="g-it">
+                  <div class="g-l">Daily Earning</div>
+                  <div class="g-v">$${p.dailyEarning}</div>
+                </div>
+                <div class="g-it">
+                  <div class="g-l">Duration</div>
+                  <div class="g-v">${p.duration} days</div>
+                </div>
+              </div>
+
+              ${tr ? `
+                <div class="prog">
+                  <div class="progbar"><div class="progfill" style="width:${prog}%"></div></div>
+                  <div class="progtext">Progress: ${tr.claimedDays}/${p.duration} days</div>
+                </div>
+                <div class="countdown" id="cd_${p.id}">Next claim in: ${formatTime(86400-(now()-tr.lastClaim))}</div>
+                <button class="btn-claim" id="claim_${p.id}" ${canClaim?'':'disabled'}>${canClaim?`Claim $${p.dailyEarning}`:'Wait'}</button>
+              ` : `
+                <button class="btn-primary" id="buy_${p.id}" ${usdtBalance<p.price?'disabled':''}>${purchased?'Purchased':'Buy Plan'}</button>
+              `}
+            </div>
+          `;
+        }).join('')}
+      `;
+      document.getElementById('main-content').innerHTML = html;
+
+      // Bind
+      TRADE_PLANS.forEach(p=>{
+        const buy=document.getElementById(`buy_${p.id}`);
+        const claim=document.getElementById(`claim_${p.id}`);
+        if(buy){
+          buy.addEventListener('click', ()=>{
+            if (purchasedPlans[p.id]) { notify('Already purchased'); return; }
+            if (usdtBalance < p.price) { notify('Insufficient balance'); return; }
+            const newBal=usdtBalance - p.price;
+            const newPurchased = { ...purchasedPlans, [p.id]:true };
+            const newTrades = { ...activeTrades, [p.id]:{ planId:p.id, purchasedAt:now(), lastClaim:now(), claimedDays:0, totalEarned:0 } };
+            save({ usdtBalance:newBal, purchasedPlans:newPurchased, activeTrades:newTrades });
+            tradeHistory.push({ type:'purchase', planId:p.id, planName:p.name, amount:p.price, timestamp:now() });
+            save({ tradeHistory });
+            sendBot(`üéâ <b>Plan Purchased</b>\nPlan: ${p.name}\nAmount: $${p.price} USDT\nDaily: $${p.dailyEarning}\nDuration: ${p.duration} days`);
+            notify(`Purchased ${p.name}`);
+            renderHome();
+          });
+        }
+        if(claim){
+          claim.addEventListener('click', ()=>{
+            const tr=activeTrades[p.id]; if(!tr) return;
+            if ((now()-tr.lastClaim)<86400){ notify('Claim available every 24h'); return; }
+            const earned=p.dailyEarning;
+            const newBal=usdtBalance+earned;
+            tr.lastClaim=now(); tr.claimedDays+=1; tr.totalEarned+=earned;
+            if (tr.claimedDays>=p.duration){
+              const copy={...activeTrades}; delete copy[p.id];
+              save({ usdtBalance:newBal, activeTrades:copy });
+              notify(`Plan completed. Total earned $${tr.totalEarned}`);
+              sendBot(`üèÜ <b>Plan Completed</b>\nPlan: ${p.name}\nTotal Earned: $${tr.totalEarned} USDT`);
+            }else{
+              save({ usdtBalance:newBal, activeTrades:{...activeTrades} });
+              notify(`Claimed $${earned} from ${p.name}`);
+              sendBot(`üí∞ <b>Daily Claimed</b>\nPlan: ${p.name}\nEarned: $${earned} USDT\nProgress: ${tr.claimedDays}/${p.duration}`);
+            }
+            tradeHistory.push({ type:'claim', planId:p.id, planName:p.name, amount:earned, timestamp:now() });
+            save({ tradeHistory });
+            renderHome();
+          });
+        }
+      });
+
+      // Countdowns
+      setInterval(()=>{
+        Object.values(activeTrades).forEach(tr=>{
+          const el=document.getElementById(`cd_${tr.planId}`); if(!el) return;
+          el.textContent = `Next claim in: ${formatTime(86400-(now()-tr.lastClaim))}`;
+        });
+      },1000);
+    }
+
+    // Wallet
+    function renderWallet(){
+      const html = `
+        <div class="section-header">
+          <div class="section-title">Wallet</div>
+          <div class="section-subtitle">Deposit, Withdraw, History, Activities & Trades</div>
+        </div>
+
+        <div class="wallet-grid">
+          <div class="wallet-item" id="w_dep">
+            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Deposit" />
+            <div class="wallet-label">Deposit</div>
+          </div>
+          <div class="wallet-item" id="w_wd">
+            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Withdraw" />
+            <div class="wallet-label">Withdraw</div>
+          </div>
+          <div class="wallet-item" id="w_deph">
+            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Deposit History" />
+            <div class="wallet-label">Deposit History</div>
+          </div>
+          <div class="wallet-item" id="w_wdh">
+            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Withdraw History" />
+            <div class="wallet-label">Withdraw History</div>
+          </div>
+          <div class="wallet-item" id="w_act">
+            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="wallet-ic" alt="Activities" />
+            <div class="wallet-label">Activities</div>
+          </div>
+          <div class="wallet-item" id="w_trd">
+            <img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png" class="wallet-ic" alt="Trades" />
+            <div class="wallet-label">Trades</div>
+          </div>
+        </div>
+        <div id="wallet-content"></div>
+      `;
+      document.getElementById('main-content').innerHTML = html;
+
+      document.getElementById('w_dep').onclick = showDepositForm;
+      document.getElementById('w_wd').onclick = showWithdrawForm;
+      document.getElementById('w_deph').onclick = showDepositHistory;
+      document.getElementById('w_wdh').onclick = showWithdrawHistory;
+      document.getElementById('w_act').onclick = showActivities;
+      document.getElementById('w_trd').onclick = showTrades;
+    }
+
+    function showDepositForm(){
+      const html = `
+        <div class="card">
+          <div class="section-subtitle" style="text-align:center;margin-bottom:8px">Deposit USDT (TON)</div>
+          <label class="form-label">Amount (min $20)</label>
+          <input id="dep_amt" type="number" min="20" step="0.01" class="input" placeholder="Enter amount">
+          <button class="btn-primary" style="margin-top:10px" id="dep_go">Confirm</button>
+        </div>
+      `;
+      document.getElementById('wallet-content').innerHTML = html;
+      document.getElementById('dep_go').onclick = processDeposit;
+    }
+
+    function processDeposit(){
+      const amt = parseFloat(document.getElementById('dep_amt').value);
+      if(!amt || amt<20){ notify('Minimum deposit is $20'); return; }
+      const memo = `ExotixDP_${userId}`;
+      const id = generateId();
+
+      const html = `
+        <div class="card">
+          <div class="timer"><div class="t-t">Complete within 15:00</div><div id="dep_timer" class="t-t" style="font-size:22px;margin-top:6px">15:00</div></div>
+          <img src="https://i.postimg.cc/g2mgknm3/Screenshot-2025-10-17-16-28-28-211-com-ton-keeper-edit.jpg" alt="QR" style="width:200px;height:200px;border-radius:12px;border:2px solid var(--accent-blue);display:block;margin:0 auto 10px">
+          <div class="row"><div>Network</div><div>TON <button class="copy" onclick="navigator.clipboard.writeText('TON')"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
+          <div class="row"><div>Address</div><div style="font-family:monospace">UQBWOgFgB4B8qBCo8CNjDUNAtvUSosw4v7v9gkt0GVOaNLSz <button class="copy" id="cp_addr"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
+          <div class="row"><div>Amount</div><div>$${amt.toFixed(2)} <button class="copy" id="cp_amt"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
+          <div class="row"><div>Memo</div><div style="font-family:monospace">${memo} <button class="copy" id="cp_memo"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Copy" /></button></div></div>
+          <label class="form-label" style="margin-top:8px">Transaction Hash</label>
+          <input id="txh" class="input" placeholder="Enter transaction hash">
+          <button class="btn-primary" style="margin-top:10px" id="dep_submit">Confirm Transaction</button>
+        </div>
+      `;
+      document.getElementById('wallet-content').innerHTML = html;
+      document.getElementById('cp_addr').onclick=()=>copy('UQBWOgFgB4B8qBCo8CNjDUNAtvUSosw4v7v9gkt0GVOaNLSz');
+      document.getElementById('cp_amt').onclick=()=>copy(String(amt));
+      document.getElementById('cp_memo').onclick=()=>copy(memo);
+
+      let t=900; const el=document.getElementById('dep_timer');
+      const it=setInterval(()=>{ const m=(t/60|0), s=(t%60); el.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; if(--t<0){clearInterval(it); el.textContent='Expired';} },1000);
+
+      document.getElementById('dep_submit').onclick = async ()=>{
+        const tx = document.getElementById('txh').value.trim();
+        if(!tx){ notify('Enter transaction hash'); return; }
+        const rec = { id, amount:amt, txHash:tx, status:'pending', timestamp:now(), memo };
+        depositHistory.push(rec);
+        save({ depositHistory });
+        try{
+          await push(ref(rtdb,'admin/deposits'), { userId, userName, amount:amt, txHash:tx, memo, timestamp:now(), status:'pending' });
+        }catch{}
+        sendBot(`üí≥ <b>Deposit Submitted</b>\nAmount: $${amt.toFixed(2)} USDT\nStatus: Pending\nTX: ${tx}`);
+        notify('Submitted. Awaiting approval.');
+        showDepositHistory();
+      };
+    }
+
+    function showDepositHistory(){
+      const html = `
+        <div class="card">
+          <div class="section-title" style="font-size:18px">Deposit History</div>
+          <div class="history-container">
+            ${depositHistory.length?depositHistory.map(d=>`
+              <div class="history-item">
+                <div class="history-left">
+                  <div class="history-amount">$${d.amount.toFixed(2)}</div>
+                  <div class="history-id">ID: ${d.id}</div>
+                </div>
+                <div class="history-right">
+                  <div class="history-status ${d.status}">${d.status}</div>
+                  <div class="history-time">${new Date(d.timestamp*1000).toLocaleString()}</div>
+                </div>
+              </div>
+            `).join(''):`<div class="section-subtitle" style="text-align:center">No deposits yet</div>`}
+          </div>
+        </div>
+      `;
+      document.getElementById('wallet-content').innerHTML = html;
+    }
+
+    function showWithdrawForm(){
+      const html = `
+        <div class="card">
+          <div class="section-subtitle" style="text-align:center;margin-bottom:8px">Withdraw USDT (TON)</div>
+          <label class="form-label">TON Address</label>
+          <input id="wd_addr" class="input" placeholder="Enter TON wallet">
+          <label class="form-label" style="margin-top:8px">Amount (min $0.10)</label>
+          <input id="wd_amt" type="number" min="0.10" step="0.01" class="input" placeholder="Enter amount">
+          <label class="form-label" style="margin-top:8px">Memo/Comment (optional)</label>
+          <input id="wd_memo" class="input" placeholder="Enter memo">
+          <button class="btn-primary" style="margin-top:10px" id="wd_go">Confirm Withdraw</button>
+        </div>
+      `;
+      document.getElementById('wallet-content').innerHTML = html;
+      document.getElementById('wd_go').onclick = async ()=>{
+        const addr=document.getElementById('wd_addr').value.trim();
+        const amt=parseFloat(document.getElementById('wd_amt').value);
+        const memo=document.getElementById('wd_memo').value.trim();
+        if(!addr){ notify('Enter address'); return; }
+        if(!amt || amt<0.10){ notify('Minimum $0.10'); return; }
+        if(amt>usdtBalance){ notify('Insufficient balance'); return; }
+        if(depositHistory.length===0){ notify('First time deposit required'); return; }
+        const id=generateId();
+        withdrawHistory.push({ id, amount:amt, address:addr, memo, status:'pending', timestamp:now() });
+        save({ withdrawHistory });
+        try{
+          await push(ref(rtdb,'admin/withdrawals'), { userId, userName, amount:amt, address:addr, memo, timestamp:now(), status:'pending' });
+        }catch{}
+        sendBot(`üí∏ <b>Withdrawal Submitted</b>\nAmount: $${amt.toFixed(2)} USDT\nStatus: Pending\nAddress: ${addr}`);
+        notify('Withdrawal submitted. Awaiting approval.');
+        showWithdrawHistory();
+      };
+    }
+
+    function showWithdrawHistory(){
+      const html = `
+        <div class="card">
+          <div class="section-title" style="font-size:18px">Withdraw History</div>
+          <div class="history-container">
+            ${withdrawHistory.length?withdrawHistory.map(w=>`
+              <div class="history-item">
+                <div class="history-left">
+                  <div class="history-amount">$${w.amount.toFixed(2)}</div>
+                  <div class="history-id">ID: ${w.id}</div>
+                </div>
+                <div class="history-right">
+                  <div class="history-status ${w.status}">${w.status}</div>
+                  <div class="history-time">${new Date(w.timestamp*1000).toLocaleString()}</div>
+                </div>
+              </div>
+            `).join(''):`<div class="section-subtitle" style="text-align:center">No withdrawals yet</div>`}
+          </div>
+        </div>
+      `;
+      document.getElementById('wallet-content').innerHTML = html;
+    }
+
+    function showActivities(){
+      const all=[...depositHistory.map(x=>({...x,type:'deposit'})),...withdrawHistory.map(x=>({...x,type:'withdraw'})),...tradeHistory.map(x=>({...x,type:'trade'}))].sort((a,b)=>b.timestamp-a.timestamp);
+      const html=`
+        <div class="card">
+          <div class="section-title" style="font-size:18px">Activities</div>
+          <div class="history-container">
+            ${all.length?all.map(a=>`
+              <div class="history-item">
+                <div class="history-left">
+                  <div class="history-amount">${a.type==='deposit'?'+':a.type==='withdraw'?'-':''}$${(a.amount||0).toFixed? (a.amount||0).toFixed(2) : a.amount}</div>
+                  <div class="history-id">${a.type.toUpperCase()}</div>
+                </div>
+                <div class="history-right">
+                  <div class="history-time">${new Date(a.timestamp*1000).toLocaleString()}</div>
+
EOF
)
