<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aviator Casino Game - Real Professional</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background: #1a1625;
      font-family: 'Segoe UI', Arial, sans-serif;
      color: #fff;
    }
    header {
      background: #23204c;
      text-align: center;
      padding: 22px 0 10px 0;
      font-size: 2rem;
      font-weight: bold;
      letter-spacing: 1.5px;
      border-top-left-radius: 22px;
      border-top-right-radius: 22px;
    }
    #main-game {
      margin: 0 auto;
      max-width: 880px;
      min-height: 100vh;
      background: #1c1a28;
      border-radius: 18px;
      box-shadow: 0 10px 42px #0008;
      padding: 0 0 24px 0;
      position: relative;
      overflow: hidden;
    }
    #multiplier-track {
      position: relative;
      width: 100%;
      height: 340px;
      background: radial-gradient(ellipse at center, #241d30 0%, #18151e 100%);
      overflow: hidden;
      border-bottom: 2px solid #29224a;
    }
    #multiplier-curve {
      position: absolute;
      left: 0; bottom: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    #plane {
      position: absolute;
      width: 74px;
      height: 64px;
      transition: left 0.06s linear, bottom 0.06s linear;
      z-index: 2;
      filter: drop-shadow(0 0 12px #e13552cc);
    }
    #current-multiplier {
      position: absolute;
      top: 44%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3.7rem;
      color: #fff;
      text-shadow: 0 0 18px #e13552bb, 0 4px 12px #000d;
      font-weight: 800;
      z-index: 4;
      letter-spacing: 1.5px;
    }
    #countdown-bar {
      background: #29224a;
      text-align: center;
      padding: 10px 0 8px 0;
      font-size: 1.23em;
      color: #ffe591;
      letter-spacing: 1px;
    }
    #controls {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 40px;
      margin-top: 26px;
      margin-bottom: 12px;
    }
    .bet-box {
      background: #25213a;
      padding: 18px 26px;
      border-radius: 14px;
      box-shadow: 0 2px 16px #0003;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .bet-amount {
      width: 75px;
      font-size: 1.21em;
      padding: 5px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #17141c;
      color: #fff;
      text-align: center;
      margin-bottom: 6px;
    }
    .bet-btn, .cashout-btn {
      background: #2cf46b;
      color: #19161d;
      font-weight: bold;
      font-size: 1.19em;
      padding: 10px 35px;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      transition: background .15s;
      box-shadow: 0 2px 8px #0004;
    }
    .bet-btn[disabled], .cashout-btn[disabled] {
      background: #aaa;
      color: #333;
      cursor: not-allowed;
    }
    .cashout-btn {
      background: #e13552;
      color: #fff;
      font-weight: 700;
    }
    #messages {
      margin: 16px auto 0 auto;
      max-width: 420px;
      text-align: center;
      font-size: 1.17em;
      min-height: 28px;
      color: #ffe591;
      font-weight: 600;
    }
    #leaderboard-title {
      font-size: 1.14em;
      font-weight: bold;
      color: #ffe591;
      margin-top: 32px;
      margin-bottom: 8px;
      text-align: center;
    }
    #leaderboard {
      max-width: 800px;
      margin: 0 auto;
      background: #19162a;
      border-radius: 13px;
      box-shadow: 0 2px 10px #0003;
      padding: 14px 16px 10px 16px;
      font-size: 1.06em;
    }
    .lb-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px 0;
      border-bottom: 1px solid #25203b;
    }
    .lb-row:last-child {
      border-bottom: none;
    }
    .lb-name { font-weight: 600; color: #8bc9fd; }
    .lb-mult { color: #e13552; font-weight: 600; }
    .lb-amt { color: #2cf46b; font-weight: 600; }
    .lb-lost { color: #ff3e44; font-weight: 500; }
    @media (max-width: 700px) {
      #main-game { max-width: 99vw; }
      #multiplier-track { height: 180px;}
      .bet-box { padding: 10px 8px; }
      .bet-amount { width: 54px;}
      #controls { flex-direction: column; gap: 18px; }
      #current-multiplier { font-size: 2.1rem;}
    }
  </style>
</head>
<body>
  <header>AVIATOR CASINO GAME</header>
  <div id="main-game">
    <div id="multiplier-track">
      <canvas id="multiplier-curve"></canvas>
      <img src="10521424.png" id="plane" />
      <span id="current-multiplier">1.00x</span>
    </div>
    <div id="countdown-bar">
      <span id="countdown-message">পরবর্তী রাউন্ড শুরু হতে মাত্র <span id="countdown">10</span> সেকেন্ড বাকি!</span>
    </div>
    <div id="controls">
      <div class="bet-box">
        <label>বাজি ১</label>
        <input type="number" class="bet-amount" id="bet1-amt" min="1" max="10000" value="10" />
        <input type="number" class="bet-amount" id="bet1-auto" min="1.01" step="0.01" value="2.00" placeholder="Auto Cashout" />
        <button class="bet-btn" id="bet1-btn">বাজি ধরুন</button>
        <button class="cashout-btn" id="bet1-cash" style="display:none;">ক্যাশ আউট</button>
      </div>
      <div class="bet-box">
        <label>বাজি ২</label>
        <input type="number" class="bet-amount" id="bet2-amt" min="1" max="10000" value="10" />
        <input type="number" class="bet-amount" id="bet2-auto" min="1.01" step="0.01" value="2.00" placeholder="Auto Cashout" />
        <button class="bet-btn" id="bet2-btn">বাজি ধরুন</button>
        <button class="cashout-btn" id="bet2-cash" style="display:none;">ক্যাশ আউট</button>
      </div>
    </div>
    <div id="messages"></div>
    <div id="leaderboard-title">লিডারবোর্ড (এই রাউন্ডে কে কততে ক্যাশ আউট করলো)</div>
    <div id="leaderboard"></div>
  </div>
  <script>
    // State
    let roundState = 'betting'; // betting, running, crashed
    let roundTime = 10; // countdown seconds
    let crashMultiplier = 0;
    let currentMultiplier = 1.00;
    let animationStartTime = null;
    let multiplierTimer = null;
    let countdownTimer = null;
    let leaderboard = [];
    let bets = [
      { id:1, amount: null, auto: null, placed: false, cashed: false, cashMultiplier: null, lost: false },
      { id:2, amount: null, auto: null, placed: false, cashed: false, cashMultiplier: null, lost: false }
    ];

    const betBtns = [document.getElementById("bet1-btn"), document.getElementById("bet2-btn")];
    const betAmts = [document.getElementById("bet1-amt"), document.getElementById("bet2-amt")];
    const betAutos = [document.getElementById("bet1-auto"), document.getElementById("bet2-auto")];
    const cashBtns = [document.getElementById("bet1-cash"), document.getElementById("bet2-cash")];
    const multElem = document.getElementById("current-multiplier");
    const messagesElem = document.getElementById("messages");
    const curveCanvas = document.getElementById("multiplier-curve");
    const planeElem = document.getElementById("plane");
    const countdownElem = document.getElementById("countdown");
    const countdownMsgElem = document.getElementById("countdown-message");
    const leaderboardElem = document.getElementById("leaderboard");

    // Utility
    function provablyFairCrash() {
      let rand = Math.random();
      if (rand < 0.004) return 1.01;
      let crash = Math.floor((1 / (1 - rand)) * 100) / 100;
      return Math.max(1.01, Math.min(crash, 100));
    }

    function resetBets() {
      bets.forEach(bet => {
        bet.amount = null;
        bet.auto = null;
        bet.placed = false;
        bet.cashed = false;
        bet.cashMultiplier = null;
        bet.lost = false;
      });
    }

    // --- UI ---
    function updateBetUI() {
      bets.forEach((bet, i) => {
        betAmts[i].disabled = roundState !== 'betting' || bet.placed;
        betAutos[i].disabled = roundState !== 'betting' || bet.placed;
        betBtns[i].disabled = roundState !== 'betting' || bet.placed;
        cashBtns[i].disabled = !(roundState === 'running' && bet.placed && !bet.cashed && !bet.lost);
        cashBtns[i].style.display = (roundState === 'running' && bet.placed && !bet.cashed && !bet.lost) ? '' : 'none';
        betBtns[i].style.display = (roundState === 'betting' && !bet.placed) ? '' : 'none';
      });
    }
    function showMessage(msg, color="#ffe591") {
      messagesElem.textContent = msg;
      messagesElem.style.color = color;
    }
    function drawCurve() {
      let w = curveCanvas.width = curveCanvas.offsetWidth;
      let h = curveCanvas.height = curveCanvas.offsetHeight;
      let maxT = Math.log(crashMultiplier)/Math.log(1.011);
      const ctx = curveCanvas.getContext('2d');
      ctx.clearRect(0, 0, w, h);
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(0, h-34);
      let points = 120;
      for (let i=0; i<=points; ++i) {
        let t = i / points * (Math.log(currentMultiplier)/Math.log(crashMultiplier));
        let mult = Math.max(1, Math.min(crashMultiplier, Math.exp(t * Math.log(crashMultiplier) )));
        let x = t * w * 0.98 + 10;
        let y = h-34 - (h * (Math.log(mult) / Math.log(crashMultiplier))) * 0.77;
        ctx.lineTo(x, y);
      }
      ctx.lineTo(w, h);
      ctx.closePath();
      ctx.fillStyle = "rgba(225,53,82,0.16)";
      ctx.fill();
      ctx.restore();
      // Curve line
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(0, h-34);
      for (let i=0; i<=points; ++i) {
        let t = i / points * (Math.log(currentMultiplier)/Math.log(crashMultiplier));
        let mult = Math.max(1, Math.min(crashMultiplier, Math.exp(t * Math.log(crashMultiplier) )));
        let x = t * w * 0.98 + 10;
        let y = h-34-(h * (Math.log(mult) / Math.log(crashMultiplier))) * 0.77;
        ctx.lineTo(x, y);
      }
      ctx.strokeStyle = "#e13552";
      ctx.lineWidth = 3.5;
      ctx.shadowColor = "#e13552";
      ctx.shadowBlur = 8;
      ctx.stroke();
      ctx.restore();
    }
    function positionPlane() {
      let w = curveCanvas.offsetWidth, h = curveCanvas.offsetHeight;
      let t = Math.log(currentMultiplier) / Math.log(crashMultiplier);
      if (!isFinite(t) || t < 0) t = 0;
      t = Math.min(1, Math.max(0, t));
      let left = 28 + t * (w - 88);
      let bottom = 8 + (h * t * 0.69);
      planeElem.style.left = left + "px";
      planeElem.style.bottom = bottom + "px";
    }
    function updateLeaderboard() {
      let html = leaderboard.length === 0
        ? `<div style="text-align:center;color:#8bc9fd;">এই রাউন্ডে কেউ ক্যাশ আউট করেনি।</div>`
        : leaderboard.map(lb =>
            `<div class="lb-row">
              <span class="lb-name">আপনি (${lb.betId === 1 ? 'বাজি ১' : 'বাজি ২'})</span>
              <span class="lb-mult">${lb.cashed ? lb.cashMultiplier.toFixed(2)+'x' : '<span class="lb-lost">ক্র্যাশড</span>'}</span>
              <span class="lb-amt">${lb.cashed ? (lb.amount * lb.cashMultiplier).toFixed(2) : '-'}</span>
            </div>`).join('');
      leaderboardElem.innerHTML = html;
    }
    // --- Game Loop ---
    function startBettingPhase() {
      roundState = 'betting';
      crashMultiplier = provablyFairCrash();
      currentMultiplier = 1.00;
      resetBets();
      leaderboard = [];
      multElem.textContent = "1.00x";
      showMessage('নতুন রাউন্ড শুরু হবে! বাজি ধরুন।');
      updateBetUI();
      updateLeaderboard();
      drawCurve();
      positionPlane();
      let t = roundTime;
      countdownElem.textContent = t;
      countdownMsgElem.innerHTML = `পরবর্তী রাউন্ড শুরু হতে মাত্র <span id="countdown">${t}</span> সেকেন্ড বাকি!`;
      countdownTimer = setInterval(() => {
        t--;
        countdownElem.textContent = t;
        if (t === 0) {
          clearInterval(countdownTimer);
          startRunningPhase();
        }
      }, 1000);
    }
    function startRunningPhase() {
      roundState = 'running';
      animationStartTime = Date.now();
      currentMultiplier = 1.00;
      multElem.textContent = "1.00x";
      showMessage('গেম চলছে... ক্যাশ আউট করার জন্য ক্যাশ আউট বাটন চাপুন!');
      updateBetUI();
      countdownMsgElem.innerHTML = `<span style="color:#1cffc5">গেম চলছে, ক্যাশ আউটের সুযোগ!</span>`;
      drawCurve();
      positionPlane();
      multiplierTimer = setInterval(() => {
        // Plane moves slowly
        let sec = (Date.now() - animationStartTime) / 1000;
        currentMultiplier = +(1.005 ** (sec * 13) + 0.01 * sec).toFixed(2);
        if (currentMultiplier >= crashMultiplier) {
          currentMultiplier = crashMultiplier;
          crashRound();
        }
        multElem.textContent = currentMultiplier.toFixed(2) + "x";
        drawCurve();
        positionPlane();
        // Auto cashout
        bets.forEach((bet, i) => {
          if (bet.placed && !bet.cashed && !bet.lost && bet.auto && currentMultiplier >= bet.auto) {
            doCashout(i);
          }
        });
      }, 60);
    }
    function crashRound() {
      clearInterval(multiplierTimer);
      roundState = 'crashed';
      multElem.textContent = crashMultiplier.toFixed(2) + "x";
      showMessage(`ক্র্যাশ হয়েছে ${crashMultiplier.toFixed(2)}x-এ!`);
      // Process lost bets
      bets.forEach((bet, i) => {
        if (bet.placed && !bet.cashed) {
          bet.lost = true;
          leaderboard.push({betId: bet.id, amount: bet.amount, cashed: false, cashMultiplier: null});
        }
      });
      updateBetUI();
      updateLeaderboard();
      setTimeout(startBettingPhase, 3500);
    }
    function doCashout(i) {
      if (roundState !== 'running') return;
      let bet = bets[i];
      if (bet.placed && !bet.cashed && !bet.lost) {
        bet.cashed = true;
        bet.cashMultiplier = currentMultiplier;
        showMessage(`বাজি ${i+1}: ${currentMultiplier.toFixed(2)}x-এ ক্যাশ আউট!`);
        leaderboard.push({betId: bet.id, amount: bet.amount, cashed: true, cashMultiplier: currentMultiplier});
        updateBetUI();
        updateLeaderboard();
      }
    }
    // --- Bet Events ---
    betBtns[0].onclick = function() {
      let amt = parseFloat(betAmts[0].value);
      let auto = parseFloat(betAutos[0].value);
      if (isNaN(amt) || amt < 1) {
        showMessage('বাজি ১: সঠিক পরিমাণ দিন!', "#ff4a5a");
        return;
      }
      bets[0].amount = amt;
      bets[0].auto = (isNaN(auto) || auto < 1.01) ? null : auto;
      bets[0].placed = true;
      showMessage('বাজি ১ দেওয়া হয়েছে।');
      updateBetUI();
    };
    betBtns[1].onclick = function() {
      let amt = parseFloat(betAmts[1].value);
      let auto = parseFloat(betAutos[1].value);
      if (isNaN(amt) || amt < 1) {
        showMessage('বাজি ২: সঠিক পরিমাণ দিন!', "#ff4a5a");
        return;
      }
      bets[1].amount = amt;
      bets[1].auto = (isNaN(auto) || auto < 1.01) ? null : auto;
      bets[1].placed = true;
      showMessage('বাজি ২ দেওয়া হয়েছে।');
      updateBetUI();
    };
    cashBtns[0].onclick = () => doCashout(0);
    cashBtns[1].onclick = () => doCashout(1);

    // Resize
    window.addEventListener('resize', () => { drawCurve(); positionPlane(); });

    // --- Start ---
    startBettingPhase();
    drawCurve();
    updateBetUI();
    updateLeaderboard();
  </script>
</body>
</html>
